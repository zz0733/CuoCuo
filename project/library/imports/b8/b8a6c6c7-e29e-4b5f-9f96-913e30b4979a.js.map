{"version":3,"sources":["../../../../../../../assets/poker/DDZ/Script/Player/assets/poker/DDZ/Script/Player/DDZ_PlayerSelfInfo.js"],"names":["cc","Class","extends","Component","properties","playerInfo","txtAtlas","SpriteAtlas","onLoad","BtnNode","find","initSelfPlayerNode","data","node","active","clearNodeUI","initNodeUI","getChildByName","getComponent","Sprite","spriteFrame","showDiZhuIcon","clearRate","updateOutWord","parseInt","Label","string","fun","utils","loadUrlRes","headUrl","userId","nickName","coin","YL","DDZDeskInfo","status","isJiaoFen","isJiaBei","showRate","loaderID","DDZselfPlayerInfo","hideOffline","isBreak","showOffline","showAndHideReady","isReady","isDiZhu","onClickPlayerInfo","DDZAudio","playBtnClick","initPlayerInfoNode","strType","fileNameArr","atlas","getSpriteFrame","showHeadAnimation","isShow","sp","Skeleton","animation"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAW,IADH;AAERC,kBAAUN,GAAGO;AAFL,KAHP;;AAQL;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,UAvBK,oBAuBK;AACN,aAAKH,UAAL,GAAkB,IAAlB;AACA,aAAKI,OAAL,GAAeT,GAAGU,IAAH,CAAQ,mCAAR,CAAf;AACH,KA1BI;;AA2BLC,wBAAoB,4BAAUC,IAAV,EAAgB;AAChC,aAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,aAAKT,UAAL,GAAkBO,IAAlB;AACA,aAAKG,WAAL;AACA,aAAKC,UAAL,CAAgBJ,IAAhB;AACH,KAhCI;AAiCLG,iBAAa,uBAAY;AACrB,aAAKF,IAAL,CAAUI,cAAV,CAAyB,UAAzB,EAAqCC,YAArC,CAAkDlB,GAAGmB,MAArD,EAA6DC,WAA7D,GAA2E,IAA3E;AACA,aAAKC,aAAL,CAAmB,KAAnB;AACA,aAAKC,SAAL;AACA,aAAKC,aAAL,CAAmBC,SAAS,CAAT,CAAnB;AACA,aAAKX,IAAL,CAAUI,cAAV,CAAyB,IAAzB,EAA+BC,YAA/B,CAA4ClB,GAAGyB,KAA/C,EAAsDC,MAAtD,GAA+D,EAA/D;AACA,aAAKb,IAAL,CAAUI,cAAV,CAAyB,YAAzB,EAAuCA,cAAvC,CAAsD,MAAtD,EAA8DC,YAA9D,CAA2ElB,GAAGyB,KAA9E,EAAqFC,MAArF,GAA8F,EAA9F;AACA,aAAKb,IAAL,CAAUI,cAAV,CAAyB,QAAzB,EAAmCA,cAAnC,CAAkD,KAAlD,EAAyDC,YAAzD,CAAsElB,GAAGyB,KAAzE,EAAgFC,MAAhF,GAAyF,EAAzF;AACH,KAzCI;AA0CLV,gBAAY,oBAAUJ,IAAV,EAAgB;AACxBe,YAAIC,KAAJ,CAAUC,UAAV,CAAqBjB,KAAKkB,OAA1B,EAAmC,KAAKjB,IAAL,CAAUI,cAAV,CAAyB,UAAzB,CAAnC,EADwB,CACiD;AACzE,aAAKI,aAAL,CAAmB,KAAnB;AACA,aAAKR,IAAL,CAAUI,cAAV,CAAyB,IAAzB,EAA+BC,YAA/B,CAA4ClB,GAAGyB,KAA/C,EAAsDC,MAAtD,GAA+Dd,KAAKmB,MAApE;AACA,aAAKlB,IAAL,CAAUI,cAAV,CAAyB,YAAzB,EAAuCA,cAAvC,CAAsD,MAAtD,EAA8DC,YAA9D,CAA2ElB,GAAGyB,KAA9E,EAAqFC,MAArF,GAA8Fd,KAAKoB,QAAnG;AACA,aAAKnB,IAAL,CAAUI,cAAV,CAAyB,QAAzB,EAAmCA,cAAnC,CAAkD,KAAlD,EAAyDC,YAAzD,CAAsElB,GAAGyB,KAAzE,EAAgFC,MAAhF,GAAyFd,KAAKqB,IAA9F;AACA,aAAKpB,IAAL,CAAUI,cAAV,CAAyB,MAAzB,EAAiCH,MAAjC,GAA0C,KAA1C;AACA,YAAGd,GAAGkC,EAAH,CAAMC,WAAN,CAAkBC,MAAlB,IAA4B,CAA5B,IAAiCxB,KAAKyB,SAAL,IAAkB,CAAC,CAAvD,EAAyD;AACrD;AACA,iBAAKd,aAAL,CAAmBC,SAASZ,KAAKyB,SAAL,GAAiB,CAA1B,CAAnB;AACH;AACD,YAAIzB,KAAK0B,QAAL,IAAiB,CAArB,EAAuB;AACrB,iBAAKC,QAAL,CAAc,IAAd;AACD;AACD,YAAI3B,KAAK0B,QAAL,IAAiB,CAAjB,IAAsBtC,GAAGkC,EAAH,CAAMC,WAAN,CAAkBC,MAAlB,IAA4B,CAAtD,EAAyD;AACrDxB,iBAAK0B,QAAL,IAAiB,CAAjB,GACI,KAAKf,aAAL,CAAmB,CAAnB,CADJ,GAEI,KAAKA,aAAL,CAAmB,EAAnB,CAFJ;AAGH;AACD,YAAG,CAACvB,GAAGkC,EAAH,CAAMC,WAAN,CAAkBC,MAAlB,IAA4B,CAA5B,IAAiCpC,GAAGkC,EAAH,CAAMC,WAAN,CAAkBC,MAAlB,IAA4B,CAA9D,KACApC,GAAGkC,EAAH,CAAMM,QAAN,IAAkBxC,GAAGkC,EAAH,CAAMO,iBAAN,CAAwBV,MAD7C,EACoD;AAChD,iBAAKV,aAAL,CAAmB,IAAnB;AACH;AACD,aAAKqB,WAAL;AACA,YAAG9B,KAAK+B,OAAL,KAAiB,IAApB,EAAyB;AACrB,iBAAKC,WAAL;AACH;AACJ,KArEI;AAsELA,iBAAa,uBAAU;AACnB,aAAK/B,IAAL,CAAUI,cAAV,CAAyB,aAAzB,EAAwCH,MAAxC,GAAiD,IAAjD;AACH,KAxEI;AAyEL4B,iBAAa,uBAAU;AACnB,aAAK7B,IAAL,CAAUI,cAAV,CAAyB,aAAzB,EAAwCH,MAAxC,GAAiD,KAAjD;AACH,KA3EI;AA4EL+B,sBAAkB,0BAAUC,OAAV,EAAmB;AACjC,YAAI,KAAKrC,OAAL,CAAaQ,cAAb,CAA4B,WAA5B,CAAJ,EAA6C;AACzC,iBAAKR,OAAL,CAAaQ,cAAb,CAA4B,WAA5B,EAAyCH,MAAzC,GAAkD,CAACgC,OAAnD;AACH;AACD,YAAGA,WAAW,IAAd,EAAmB;AACf,iBAAKjC,IAAL,CAAUI,cAAV,CAAyB,MAAzB,EAAiCH,MAAjC,GAA0C,IAA1C;AACH,SAFD,MAEO;AACH,iBAAKD,IAAL,CAAUI,cAAV,CAAyB,MAAzB,EAAiCH,MAAjC,GAA0C,KAA1C;AACH;AAEJ,KAtFI;AAuFLO,mBAAe,uBAAU0B,OAAV,EAAmB;AAC9B,aAAKA,OAAL,GAAeA,OAAf;AACA,aAAKlC,IAAL,CAAUI,cAAV,CAAyB,WAAzB,EAAsCH,MAAtC,GAA+C,KAAKiC,OAApD;AACH,KA1FI;AA2FLC,uBAAmB,6BAAU;AACzBhD,WAAGkC,EAAH,CAAMe,QAAN,CAAeC,YAAf;AACAlD,WAAGU,IAAH,CAAQ,qBAAR,EAA+BQ,YAA/B,CAA4C,UAA5C,EAAwDiC,kBAAxD,CAA2E,KAAK9C,UAAhF,EAA2F,CAA3F;AACH,KA9FI;AA+FLkC,cAAU,kBAASzB,MAAT,EAAgB;AACtB,aAAKD,IAAL,CAAUI,cAAV,CAAyB,MAAzB,EAAiCH,MAAjC,GAA0CA,MAA1C;AACH,KAjGI;AAkGLQ,eAAW,qBAAU;AACjB,aAAKT,IAAL,CAAUI,cAAV,CAAyB,MAAzB,EAAiCH,MAAjC,GAA0C,KAA1C;AACH,KApGI;AAqGLS,mBAAe,uBAAS6B,OAAT,EAAiB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAIC,cAAc,CAAC,EAAD,EAAI,UAAJ,EAAe,SAAf,EAAyB,QAAzB,EAAkC,QAAlC,EAA2C,QAA3C,EAAoD,QAApD,EAA6D,EAA7D,EAAgE,EAAhE,EAAmE,QAAnE,EAA4E,EAA5E,EAA+E,EAA/E,EAAkF,QAAlF,EAA2F,QAA3F,CAAlB;AACA,YAAIC,QAAQ,KAAKhD,QAAjB;AACA,YAAG8C,WAAW,CAAd,EAAiB;AACb,iBAAKvC,IAAL,CAAUI,cAAV,CAAyB,UAAzB,EAAqCH,MAArC,GAA8C,KAA9C;AACH,SAFD,MAEK;AACD,iBAAKD,IAAL,CAAUI,cAAV,CAAyB,UAAzB,EAAqCH,MAArC,GAA8C,IAA9C;AACA,iBAAKD,IAAL,CAAUI,cAAV,CAAyB,UAAzB,EAAqCC,YAArC,CAAkDlB,GAAGmB,MAArD,EAA6DC,WAA7D,GAA2EkC,MAAMC,cAAN,CAAqBF,YAAYD,OAAZ,CAArB,CAA3E;AACH;AAEJ,KAxHI;AAyHLI,uBAAmB,2BAAUC,MAAV,EAAkB;AACjC,aAAK5C,IAAL,CAAUI,cAAV,CAAyB,UAAzB,EAAqCC,YAArC,CAAkDwC,GAAGC,QAArD,EAA+DC,SAA/D,GAA2E,WAA3E;AACA,aAAK/C,IAAL,CAAUI,cAAV,CAAyB,UAAzB,EAAqCH,MAArC,GAA8C2C,MAA9C;AACH;AA5HI,CAAT","file":"DDZ_PlayerSelfInfo.js","sourceRoot":"../../../../../../../assets/poker/DDZ/Script/Player","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        playerInfo:null,\n        txtAtlas: cc.SpriteAtlas,\n    },\n\n    //玩家信息\n//     message ddz_base_playerInfo {\n//     optional int64 userId = 1; //ID\n//     optional string nickName = 2; //昵称\n//     optional int32 sex = 3; //性别\n//     optional string headUrl = 4; //头像\n//     optional int32 coin = 5; //分数（金币）\n//     optional playerGameStatus status = 6; //游戏状态\n//     optional bool isReady = 7; //是否准备\n//     optional bool isBreak = 8; //是否掉线\n//     optional bool isLeave = 9; //是否离开\n//     optional int32 score = 10; //分数\n//     optional string ip = 11; //玩家IP\n//     optional int32 index = 12; //玩家的座位\n// }\n    onLoad () {\n        this.playerInfo = null;\n        this.BtnNode = cc.find(\"DDZ_UIROOT/MainNode/PlayerBtnNode\");\n    },\n    initSelfPlayerNode: function (data) {\n        this.node.active = true;\n        this.playerInfo = data;\n        this.clearNodeUI();\n        this.initNodeUI(data);\n    },\n    clearNodeUI: function () {\n        this.node.getChildByName(\"HeadNode\").getComponent(cc.Sprite).spriteFrame = null;\n        this.showDiZhuIcon(false);\n        this.clearRate();\n        this.updateOutWord(parseInt(0));\n        this.node.getChildByName(\"ID\").getComponent(cc.Label).string = \"\";\n        this.node.getChildByName(\"NickNameBG\").getChildByName(\"Name\").getComponent(cc.Label).string = \"\";\n        this.node.getChildByName(\"CoinBG\").getChildByName(\"Num\").getComponent(cc.Label).string = \"\";\n    },\n    initNodeUI: function (data) {\n        fun.utils.loadUrlRes(data.headUrl, this.node.getChildByName(\"HeadNode\"));// 头像\n        this.showDiZhuIcon(false);\n        this.node.getChildByName(\"ID\").getComponent(cc.Label).string = data.userId;\n        this.node.getChildByName(\"NickNameBG\").getChildByName(\"Name\").getComponent(cc.Label).string = data.nickName;\n        this.node.getChildByName(\"CoinBG\").getChildByName(\"Num\").getComponent(cc.Label).string = data.coin;\n        this.node.getChildByName(\"Rate\").active = false;\n        if(cc.YL.DDZDeskInfo.status == 4 && data.isJiaoFen != -1){\n            // 叫分阶段\n            this.updateOutWord(parseInt(data.isJiaoFen + 3));\n        }\n        if( data.isJiaBei == 1){\n          this.showRate(true);\n        }\n        if (data.isJiaBei != 0 && cc.YL.DDZDeskInfo.status == 5) {\n            data.isJiaBei == 1 ?\n                this.updateOutWord(2) :\n                this.updateOutWord(13);\n        }\n        if((cc.YL.DDZDeskInfo.status == 5 || cc.YL.DDZDeskInfo.status == 6)\n        && cc.YL.loaderID == cc.YL.DDZselfPlayerInfo.userId){\n            this.showDiZhuIcon(true);\n        }\n        this.hideOffline();\n        if(data.isBreak === true){\n            this.showOffline();\n        }\n    },\n    showOffline: function(){\n        this.node.getChildByName(\"OfflineNode\").active = true;\n    },\n    hideOffline: function(){\n        this.node.getChildByName(\"OfflineNode\").active = false;\n    },\n    showAndHideReady: function (isReady) {\n        if( this.BtnNode.getChildByName(\"DDZ_Ready\")){\n            this.BtnNode.getChildByName(\"DDZ_Ready\").active = !isReady;\n        }\n        if(isReady == true){\n            this.node.getChildByName(\"Word\").active = true;\n        }  else{\n            this.node.getChildByName(\"Word\").active = false;\n        }\n\n    },\n    showDiZhuIcon: function (isDiZhu) {\n        this.isDiZhu = isDiZhu;\n        this.node.getChildByName(\"DiZhuIcon\").active = this.isDiZhu;\n    },\n    onClickPlayerInfo: function(){\n        cc.YL.DDZAudio.playBtnClick();\n        cc.find(\"DDZ_UIROOT/MainNode\").getComponent(\"DDZ_Main\").initPlayerInfoNode(this.playerInfo,1);\n    },\n    showRate: function(active){\n        this.node.getChildByName(\"Rate\").active = active;\n    },\n    clearRate: function(){\n        this.node.getChildByName(\"Rate\").active = false;\n    },\n    updateOutWord: function(strType){\n        // 不出 1 dz_zt0000\n        // 加倍 2 dz_zt00\n        // 不叫 3 dz_zt0\n        // 一分 4 dz_zt1\n        // 2分  5 dz_zt2\n        // 3分  6 dz_zt3\n        // 6分  7 dz_zt4\n        // 9分  8 dz_zt5\n        // 不加倍 9\n        var fileNameArr = [\"\",\"dz_zt000\",\"dz_zt00\",\"dz_zt0\",\"dz_zt1\",\"dz_zt2\",\"dz_zt3\",\"\",\"\",\"dz_zt4\",\"\",\"\",\"dz_zt5\",\"dz_zt7\"];\n        var atlas = this.txtAtlas;\n        if(strType == 0 ){\n            this.node.getChildByName(\"ShowWord\").active = false;\n        }else{\n            this.node.getChildByName(\"ShowWord\").active = true;\n            this.node.getChildByName(\"ShowWord\").getComponent(cc.Sprite).spriteFrame = atlas.getSpriteFrame(fileNameArr[strType]);\n        }\n\n    },\n    showHeadAnimation: function (isShow) {\n        this.node.getChildByName(\"HeadAnim\").getComponent(sp.Skeleton).animation = \"animation\";\n        this.node.getChildByName(\"HeadAnim\").active = isShow;\n    }\n});\n"]}