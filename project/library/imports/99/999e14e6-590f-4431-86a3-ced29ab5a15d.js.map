{"version":3,"sources":["../../../../../../../assets/mahjong/script/wahua/desk/assets/mahjong/script/wahua/desk/opsWahua.js"],"names":["WhUtils","require","cc","Class","extends","Component","properties","chiNode","type","Node","default","huanNode","gangNode","huNode","onLoad","fun","event","add","show","bind","getChildByName","on","onBtnChiClick","onBtnHuanClick","onBntGangClick","onBtnHuClick","onDestroy","remove","getSpriteFrameByCard","id","node","parent","getComponent","paiMianAltas","getSpriteFrame","getCardById","data","_data","name","isEat","isReplaceWhite","isGang","isHu","i","playChess","length","Sprite","spriteFrame","active","num","net","send","showChess"],"mappings":"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","file":"opsWahua.js","sourceRoot":"../../../../../../../assets/mahjong/script/wahua/desk","sourcesContent":["const WhUtils = require('whUtils');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        chiNode: {\n            type: cc.Node,\n            default: null,\n        },\n        huanNode: {\n            type: cc.Node,\n            default: null,\n        },\n        gangNode: {\n            type: cc.Node,\n            default: null,\n        },\n        huNode: {\n            type: cc.Node,\n            default: null,\n        },\n    },\n\n    onLoad () {\n        fun.event.add('wahuaOpsEventListener', 'wahuaOpsEvent', this.show.bind(this));\n\n        this.chiNode.getChildByName('btnChi').on('click', this.onBtnChiClick.bind(this, 1));\n        this.chiNode.getChildByName('btnGuo').on('click', this.onBtnChiClick.bind(this, 0));\n        this.huanNode.getChildByName('btnHuan').on('click', this.onBtnHuanClick, this);\n        this.gangNode.getChildByName('btnGang').on('click', this.onBntGangClick, this);\n        this.huNode.getChildByName('btnHu').on('click', this.onBtnHuClick, this);\n    },\n\n    onDestroy() {\n        fun.event.remove('wahuaOpsEventListener');\n    },\n\n    getSpriteFrameByCard(id) {\n        return this.node.parent.getComponent('gameMgrWahua').paiMianAltas.getSpriteFrame(WhUtils.getCardById(id));;\n    },\n\n    show(data) {\n        this._data = data;\n        let name;\n        if (data.isEat) {\n            name = 'chiNode';\n        } else if (data.isReplaceWhite) {\n            name = 'huanNode';\n        } else if (data.isGang) {\n            name = 'gangNode';\n        } else if (data.isHu) {\n            name = 'huNode';\n        }\n        for (let i = 0; i < data.playChess.length; ++i) {\n            this[name].getChildByName('card' + (i + 1)).getComponent(cc.Sprite).spriteFrame = this.getSpriteFrameByCard(data.playChess[i]);\n        }\n        this[name].active = true;\n    },\n\n    onBtnChiClick(num) {\n        this.chiNode.active = false;\n        fun.net.send('OpsAccept', { isEat: num, showChess: this._data.playChess });\n    },\n\n    onBtnHuanClick() {\n        this.huanNode.active = false;\n        fun.net.send('OpsAccept', { isReplaceWhite: 1, showChess: this._data.playChess });\n    },\n\n    onBntGangClick() {\n        this.gangNode.active = false;\n        fun.net.send('OpsAccept', { isGang: 1, showChess: this._data.playChess });\n    },\n\n    onBtnHuClick() {\n        this.huNode.active = false;\n        fun.net.send('OpsAccept', { isHu: 1, showChess: this._data.playChess });\n    },\n\n});"]}