{"version":3,"sources":["../../../../../../../assets/poker/DDZ/Script/Desk/assets/poker/DDZ/Script/Desk/DDZ_Disslove.js"],"names":["cc","Class","extends","Component","properties","start","onClickComfire","YL","DDZAudio","playBtnClick","fun","net","send","userId","db","getData","UserId","isAgree","onClickCancel","initUI","msg","playerNode","node","getChildByName","nickName","applyer","DDZselfPlayerInfo","active","DDZrightPlayerInfo","DDZleftPlayerInfo","getComponent","RichText","string","Label","utils","loadUrlRes","headUrl","responseUser","dissFail","setTime","remainSeconds","time","timeLabNode","schedule","updateTimeStr","onDestroy","unschedule","bind","toString","str","UIROOT","find","showPopWin","destroy"],"mappings":"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","file":"DDZ_Disslove.js","sourceRoot":"../../../../../../../assets/poker/DDZ/Script/Desk","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {},\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n\n\n    onClickComfire: function () {\n        cc.YL.DDZAudio.playBtnClick();\n        fun.net.send(\"PID_DISSOLVE_REPLY\", {\n            userId: fun.db.getData('UserInfo').UserId,\n            isAgree: true,\n        });\n    },\n    onClickCancel: function () {\n        cc.YL.DDZAudio.playBtnClick();\n        fun.net.send(\"PID_DISSOLVE_REPLY\", {\n            userId: fun.db.getData('UserInfo').UserId,\n            isAgree: false,\n        });\n    },\n    initUI: function (msg) {\n        // /广播玩家是否同意\n        this.playerNode = this.node.getChildByName(\"back\").getChildByName(\"playerList\");\n        var nickName = msg.applyer + \"\";\n        if (fun.db.getData('UserInfo').UserId == msg.applyer) {\n            nickName = cc.YL.DDZselfPlayerInfo.nickName;\n            this.node.getChildByName(\"back\").getChildByName(\"btnDisagree\").active = false;\n            this.node.getChildByName(\"back\").getChildByName(\"btnAgree\").active = false;\n        }\n        if (msg.applyer == cc.YL.DDZrightPlayerInfo.userId) {\n            nickName = cc.YL.DDZrightPlayerInfo.nickName;\n        }\n        if (msg.applyer == cc.YL.DDZleftPlayerInfo.userId) {\n            nickName = cc.YL.DDZleftPlayerInfo.nickName;\n        }\n        this.node.getChildByName(\"back\").getChildByName(\"title\").getComponent(cc.RichText).string = \"玩家\" + nickName + \"申请退出游戏，请投票\";\n        this.playerNode.getChildByName(\"player_1\").getChildByName(\"name\").getComponent(cc.Label).string = cc.YL.DDZrightPlayerInfo.nickName + \"\";\n        this.playerNode.getChildByName(\"player_2\").getChildByName(\"name\").getComponent(cc.Label).string = cc.YL.DDZleftPlayerInfo.nickName + \"\";\n        this.playerNode.getChildByName(\"player_0\").getChildByName(\"name\").getComponent(cc.Label).string = cc.YL.DDZselfPlayerInfo.nickName + \"\";\n        fun.utils.loadUrlRes(cc.YL.DDZrightPlayerInfo.headUrl, this.playerNode.getChildByName(\"player_1\").getChildByName(\"img\"));// 头像\n        fun.utils.loadUrlRes(cc.YL.DDZleftPlayerInfo.headUrl, this.playerNode.getChildByName(\"player_2\").getChildByName(\"img\"));// 头像\n        fun.utils.loadUrlRes(cc.YL.DDZselfPlayerInfo.headUrl, this.playerNode.getChildByName(\"player_0\").getChildByName(\"img\"));// 头像\n\n        if (fun.db.getData('UserInfo').UserId == msg.responseUser) {\n            msg.isAgree == true ?\n                this.playerNode.getChildByName(\"player_0\").getChildByName(\"ok\").active = true :\n                // this.playerNode.getChildByName(\"player_0\").getChildByName(\"no\").active = true;\n                this.dissFail(\"解散房间失败，玩家\" + cc.YL.DDZselfPlayerInfo.nickName + \"拒绝解散房间\");\n            this.node.getChildByName(\"back\").getChildByName(\"btnDisagree\").active = false;\n            this.node.getChildByName(\"back\").getChildByName(\"btnAgree\").active = false;\n        }\n        if (msg.responseUser == cc.YL.DDZrightPlayerInfo.userId) {\n\n            msg.isAgree == true ?\n                this.playerNode.getChildByName(\"player_1\").getChildByName(\"ok\").active = true :\n                // this.playerNode.getChildByName(\"player_1\").getChildByName(\"no\").active = true;\n                this.dissFail(\"解散房间失败，玩家\" + cc.YL.DDZrightPlayerInfo.nickName + \"拒绝解散房间\");\n\n        }\n        if (msg.responseUser == cc.YL.DDZleftPlayerInfo.userId) {\n\n            msg.isAgree == true ?\n                this.playerNode.getChildByName(\"player_2\").getChildByName(\"ok\").active = true :\n                // this.playerNode.getChildByName(\"player_2\").getChildByName(\"no\").active = true;\n                this.dissFail(\"解散房间失败，玩家\" + cc.YL.DDZleftPlayerInfo.nickName + \"拒绝解散房间\");\n\n        }\n        this.setTime(msg.remainSeconds);\n    },\n    setTime: function (time) {\n        this.timeLabNode = this.node.getChildByName(\"back\").getChildByName(\"timeLabel\");\n        this.timeLabNode.getComponent(cc.Label).string = time;\n        this.time = time;\n        this.schedule(this.updateTimeStr, 1);\n    },\n    onDestroy: function () {\n        this.unschedule(this.updateTimeStr);\n    },\n    updateTimeStr: function () {\n        this.time--;\n        if (this.time <= 0) {\n            this.timeLabNode.getComponent(cc.Label).string = 0 + \"\";\n            this.unschedule(this.updateTimeStr.bind(this));\n        } else {\n            this.timeLabNode.getComponent(cc.Label).string = this.time.toString();\n        }\n    },\n    dissFail: function (str) {\n        var UIROOT = cc.find(\"DDZ_UIROOT\");\n        UIROOT.getChildByName(\"MainNode\").getComponent(\"DDZ_Main\").showPopWin(str, 1);\n        this.node.active = false;\n        this.node.destroy();\n    },\n\n});\n"]}