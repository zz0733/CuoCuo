{"version":3,"sources":["../../../../../../../assets/poker/DDZ/Script/Game/assets/poker/DDZ/Script/Game/DDZ_GameAction.js"],"names":["GameAction","cc","Class","bindNodeName","selfID","fun","db","getData","UserId","selfNode","find","rightNode","leftNode","selfActiveNode","rightActiveNode","leftActiveNode","selfHandPokerNode","getChildByName","rightHandPokerNode","leftHandPokerNode","selfOutNode","rightOutNode","leftOutNode","selfOutNodeComp","getComponent","rightOutNodeComp","leftOutNodeComp","selfHandPokerNodeComp","rightHandPokerNodeComp","leftHandPokerNodeComp","selfNodeComp","rightNodeComp","leftNodeComp","BtnNode","startJiaoFen","data","removeAllChildren","showHeadAnimation","retMsg","userId","jiaoFenPre","JiaoFen","jiaoFenNode","instantiate","active","addChild","initJIaoFenUI","YL","DDZrightPlayerInfo","DDZleftPlayerInfo","updateJiaoFen","destroy","fen","updateOutWord","parseInt","hideOffline","endJiaoFen","startJiaBei","jiaBeiPre","JiaBei","jiaBeiNode","updateJiaBei","jiaBeiResult","showRate","endJiaBei","showDiPai","isReconnect","node","initDiPai","diPais","removeDiPai","clearDiPai","overTurn","info","activeUser","setTouchEvent","i","playerRate","length","UIROOT","DDZSelfRate","rate","initRate","canOut","passPre","pass","passNode","outCardPre","outCard","outCardNode","initBtnStatus","isNewRound","setTimeout","bind","showPass","showDissUI","showDissResult","outCardFail","showTipStr","module","exports","DDZGameAction"],"mappings":"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","file":"DDZ_GameAction.js","sourceRoot":"../../../../../../../assets/poker/DDZ/Script/Game","sourcesContent":["/*************\n * 游戏内操作的所有处理\n * 只是玩家自己的按钮事件\n * 这些操作之后的渲染工作都在Player目录下对应玩家js\n * 包含有叫分\n * 加倍\n * 出牌\n * 过牌等\n * *********/\nvar GameAction = cc.Class({});\nGameAction.bindNodeName = function () {\n    this.selfID = fun.db.getData('UserInfo').UserId;\n    this.selfNode = cc.find(\"DDZ_UIROOT/MainNode/SelfPlayerInfo\");\n    this.rightNode = cc.find(\"DDZ_UIROOT/MainNode/RightPlayerInfo\");\n    this.leftNode = cc.find(\"DDZ_UIROOT/MainNode/LeftPlayerInfo\");\n    this.selfActiveNode = cc.find(\"DDZ_UIROOT/MainNode/SelfPlayerPoker\");\n    this.rightActiveNode = cc.find(\"DDZ_UIROOT/MainNode/RightPlayerPoker\");\n    this.leftActiveNode = cc.find(\"DDZ_UIROOT/MainNode/LeftPlayerPoker\");\n    this.selfHandPokerNode = this.selfActiveNode.getChildByName(\"HandPoker\");\n    this.rightHandPokerNode = this.rightActiveNode.getChildByName(\"HandPoker\");\n    this.leftHandPokerNode = this.leftActiveNode.getChildByName(\"HandPoker\");\n    this.selfOutNode = this.selfActiveNode.getChildByName(\"OutPoker\");\n    this.rightOutNode = this.rightActiveNode.getChildByName(\"OutPoker\");\n    this.leftOutNode = this.leftActiveNode.getChildByName(\"OutPoker\");\n    this.selfOutNodeComp = this.selfOutNode.getComponent(\"DDZ_PlayerSelfOutPoker\");\n    this.rightOutNodeComp = this.rightOutNode.getComponent(\"DDZ_PlayerRightOutPoker\");\n    this.leftOutNodeComp = this.leftOutNode.getComponent(\"DDZ_PlayerLeftOutPoker\");\n    this.selfHandPokerNodeComp = this.selfHandPokerNode.getComponent(\"DDZ_PlayerSelfPoker\");\n    this.rightHandPokerNodeComp = this.rightHandPokerNode.getComponent(\"DDZ_PlayerRightPoker\");\n    this.leftHandPokerNodeComp = this.leftHandPokerNode.getComponent(\"DDZ_PlayerLeftPoker\");\n    this.selfNodeComp = this.selfNode.getComponent(\"DDZ_PlayerSelfInfo\");\n    this.rightNodeComp = this.rightNode.getComponent(\"DDZ_PlayerRightInfo\");\n    this.leftNodeComp = this.leftNode.getComponent(\"DDZ_PlayerLeftInfo\");\n    this.BtnNode = cc.find(\"DDZ_UIROOT/MainNode/PlayerBtnNode\");\n};\n\nGameAction.startJiaoFen = function (data) {\n    // 开始叫分的操作\n    // 初始化叫分的预制\n    //广播\n    this.bindNodeName();\n    this.BtnNode.removeAllChildren();\n    this.selfNodeComp.showHeadAnimation(false);\n    this.rightNodeComp.showHeadAnimation(false);\n    this.leftNodeComp.showHeadAnimation(false);\n    if (data.retMsg.userId == this.selfID) {\n        this.selfNodeComp.showHeadAnimation(true);\n        var jiaoFenPre = this.BtnNode.getComponent(\"DDZ_PlayerBtn\").JiaoFen;\n        var jiaoFenNode = this.BtnNode.getChildByName(\"DDZ_JiaoFen\") ?\n            this.BtnNode.getChildByName(\"DDZ_JiaoFen\") :\n            cc.instantiate(jiaoFenPre);\n        this.BtnNode.getChildByName(\"DDZ_JiaoFen\") ?\n            this.BtnNode.getChildByName(\"DDZ_JiaoFen\").active = true :\n            this.BtnNode.addChild(jiaoFenNode);\n        jiaoFenNode.getComponent(\"DDZ_JiaoFen\").initJIaoFenUI(data);\n    }\n    if (data.retMsg.userId == cc.YL.DDZrightPlayerInfo.userId) {\n        this.rightNodeComp.showHeadAnimation(true);\n    }\n    if (data.retMsg.userId == cc.YL.DDZleftPlayerInfo.userId) {\n        this.leftNodeComp.showHeadAnimation(true);\n    }\n};\nGameAction.updateJiaoFen = function (data) {\n    // 更新叫分的操作ack\n    this.bindNodeName();\n    if (this.selfID == data.retMsg.userId) {\n        if (this.BtnNode.getChildByName(\"DDZ_JiaoFen\")) {\n            this.BtnNode.getChildByName(\"DDZ_JiaoFen\").active = false;\n            this.BtnNode.getChildByName(\"DDZ_JiaoFen\").destroy();\n        }\n        data.fen != 0\n            ? this.selfNodeComp.updateOutWord(parseInt(data.fen + 3))\n            : this.selfNodeComp.updateOutWord(3);\n        this.selfNodeComp.hideOffline();\n    }\n    if (data.retMsg.userId == cc.YL.DDZrightPlayerInfo.userId) {\n        data.fen != 0\n            ? this.rightNodeComp.updateOutWord(parseInt(data.fen + 3))\n            : this.rightNodeComp.updateOutWord(3);\n        this.rightNodeComp.hideOffline();\n    }\n    if (data.retMsg.userId == cc.YL.DDZleftPlayerInfo.userId) {\n        data.fen != 0\n            ? this.leftNodeComp.updateOutWord(parseInt(data.fen + 3))\n            : this.leftNodeComp.updateOutWord(3);\n        this.leftNodeComp.hideOffline();\n    }\n};\nGameAction.endJiaoFen = function () {\n    // 结束叫分的操作\n    this.bindNodeName();\n    if (this.BtnNode.getChildByName(\"DDZ_JiaoFen\")) {\n        this.BtnNode.getChildByName(\"DDZ_JiaoFen\").active = false;\n        this.BtnNode.getChildByName(\"DDZ_JiaoFen\").destroy();\n    }\n};\nGameAction.startJiaBei = function (data) {\n    // 开始加倍的操作\n    // 初始化加倍的预制\n    this.bindNodeName();\n    this.selfNodeComp.showHeadAnimation(false);\n    this.rightNodeComp.showHeadAnimation(false);\n    this.leftNodeComp.showHeadAnimation(false);\n    if (data.retMsg.userId = this.selfID) {\n        var jiaBeiPre = this.BtnNode.getComponent(\"DDZ_PlayerBtn\").JiaBei;\n        this.BtnNode.removeAllChildren();\n        var jiaBeiNode = this.BtnNode.getChildByName(\"DDZ_JiaBei\") ?\n            this.BtnNode.getChildByName(\"DDZ_JiaBei\") :\n            cc.instantiate(jiaBeiPre);\n        this.BtnNode.getChildByName(\"DDZ_JiaBei\") ?\n            this.BtnNode.getChildByName(\"DDZ_JiaBei\").active = true :\n            this.BtnNode.addChild(jiaBeiNode);\n\n    }\n\n\n};\nGameAction.updateJiaBei = function (data) {\n    // 加倍的操作\n    this.bindNodeName();\n    if (this.selfID == data.retMsg.userId) {\n        if (this.BtnNode.getChildByName(\"DDZ_JiaBei\")) {\n            this.BtnNode.getChildByName(\"DDZ_JiaBei\").active = false;\n            this.BtnNode.getChildByName(\"DDZ_JiaBei\").destroy();\n        }\n        data.jiaBeiResult == true ?\n            this.selfNodeComp.updateOutWord(2) :\n            this.selfNodeComp.updateOutWord(13);\n        this.selfNodeComp.showRate(data.jiaBeiResult);\n        this.selfNodeComp.hideOffline();\n    }\n    if (data.retMsg.userId == cc.YL.DDZrightPlayerInfo.userId) {\n        data.jiaBeiResult == true ?\n            this.rightNodeComp.updateOutWord(2) :\n            this.rightNodeComp.updateOutWord(13);\n        this.rightNodeComp.showRate(data.jiaBeiResult);\n        this.rightNodeComp.hideOffline();\n    }\n    if (data.retMsg.userId == cc.YL.DDZleftPlayerInfo.userId) {\n        data.jiaBeiResult == true ?\n            this.leftNodeComp.updateOutWord(2) :\n            this.leftNodeComp.updateOutWord(13);\n        this.leftNodeComp.showRate(data.jiaBeiResult);\n        this.leftNodeComp.hideOffline();\n    }\n\n};\nGameAction.endJiaBei = function () {\n    // 结束加倍的操作\n    this.bindNodeName();\n    if (this.BtnNode.getChildByName(\"DDZ_JiaBei\")) {\n        this.BtnNode.getChildByName(\"DDZ_JiaBei\").active = false;\n        this.BtnNode.getChildByName(\"DDZ_JiaBei\").destroy();\n    }\n};\nGameAction.showDiPai = function (data,isReconnect) {\n    // 渲染底牌//3张底牌\n    var node = cc.find(\"DDZ_UIROOT/MainNode/BtnNode/DiPaiNode\");\n    node.getComponent(\"DDZ_DiPai\").initDiPai(data.diPais,isReconnect);\n\n};\nGameAction.removeDiPai = function () {\n    // 移除渲染底牌\n    var node = cc.find(\"DDZ_UIROOT/MainNode/BtnNode/DiPaiNode\");\n    node.getComponent(\"DDZ_DiPai\").clearDiPai();\n};\nGameAction.overTurn = function (data) {\n    cc.YL.info(\"收到overturn 当前操作玩家\", data.activeUser);\n    this.bindNodeName();\n    this.selfHandPokerNodeComp.setTouchEvent(true);\n    this.selfNodeComp.showHeadAnimation(false);\n    this.rightNodeComp.showHeadAnimation(false);\n    this.leftNodeComp.showHeadAnimation(false);\n    for (var i = 0; i < data.playerRate.length; i++) {\n        if (this.selfID == data.playerRate[i].userId) {\n            var UIROOT = cc.find(\"DDZ_UIROOT\");\n            cc.YL.DDZSelfRate = data.playerRate[i].rate;\n            UIROOT.getChildByName(\"MainNode\").getComponent(\"DDZ_Main\").initRate(data.playerRate[i].rate);// 只显示自己的倍数\n        }\n    }\n\n    if (this.selfID == data.activeUser) {\n        this.selfNodeComp.updateOutWord(0);\n        this.selfNodeComp.showHeadAnimation(true);\n        this.BtnNode.removeAllChildren();\n        this.selfOutNode.removeAllChildren();\n        if (data.canOut == false) {\n            var passPre = this.BtnNode.getComponent(\"DDZ_PlayerBtn\").pass;\n            var passNode = this.BtnNode.getChildByName(\"DDZ_Pass\") ?\n                this.BtnNode.getChildByName(\"DDZ_Pass\") :\n                cc.instantiate(passPre);\n            this.BtnNode.getChildByName(\"DDZ_Pass\") ?\n                this.BtnNode.getChildByName(\"DDZ_Pass\").active = true :\n                this.BtnNode.addChild(passNode);\n            this.selfHandPokerNodeComp.setTouchEvent(false);\n        } else {\n            var outCardPre = this.BtnNode.getComponent(\"DDZ_PlayerBtn\").outCard;\n            var outCardNode = this.BtnNode.getChildByName(\"DDZ_OutCard\") ?\n                this.BtnNode.getChildByName(\"DDZ_OutCard\") :\n                cc.instantiate(outCardPre);\n            this.BtnNode.getChildByName(\"DDZ_OutCard\") ?\n                this.BtnNode.getChildByName(\"DDZ_OutCard\").active = true :\n                this.BtnNode.addChild(outCardNode);\n            outCardNode.getComponent(\"DDZ_OutCard\").initBtnStatus(data.isNewRound);\n        }\n    } else if (data.activeUser == cc.YL.DDZrightPlayerInfo.userId) {\n        this.rightNodeComp.showHeadAnimation(true);\n        this.rightOutNode.removeAllChildren();\n    } else if (data.activeUser == cc.YL.DDZleftPlayerInfo.userId) {\n        this.leftNodeComp.showHeadAnimation(true);\n        this.leftOutNode.removeAllChildren();\n    }\n    if (data.isNewRound == true) {\n        setTimeout(function () {\n            this.selfNodeComp.updateOutWord(0);\n            this.rightNodeComp.updateOutWord(0);\n            this.leftNodeComp.updateOutWord(0);\n            this.leftOutNode.removeAllChildren();\n            this.rightOutNode.removeAllChildren();\n        }.bind(this), 300);\n    }\n};\nGameAction.showPass = function (data) {\n    // message ddz_play_pass_ack {\n    //     optional int64 userId = 1;\n    //     optional bool isOk = 2;\n    // }\n    this.bindNodeName();\n    if (this.selfID == data.retMsg.userId) {\n        this.selfNodeComp.updateOutWord(1);\n        this.selfNodeComp.hideOffline();\n    }\n    if (data.retMsg.userId == cc.YL.DDZrightPlayerInfo.userId) {\n        this.rightNodeComp.updateOutWord(1);\n        this.rightNodeComp.hideOffline();\n    }\n    if (data.retMsg.userId == cc.YL.DDZleftPlayerInfo.userId) {\n        this.leftNodeComp.updateOutWord(1);\n        this.leftNodeComp.hideOffline();\n    }\n};\nGameAction.showDissUI = function (data) {\n\n    var UIROOT = cc.find(\"DDZ_UIROOT\");\n    UIROOT.getChildByName(\"MainNode\").getComponent(\"DDZ_Main\").showDissUI(data);\n};\nGameAction.showDissResult = function (data) {\n\n    var UIROOT = cc.find(\"DDZ_UIROOT\");\n    UIROOT.getChildByName(\"MainNode\").getComponent(\"DDZ_Main\").showDissResult(\"房间已解散\");\n};\nGameAction.outCardFail = function () {\n    this.selfHandPokerNodeComp.setTouchEvent(true);\n    var UIROOT = cc.find(\"DDZ_UIROOT\");\n    UIROOT.getChildByName(\"MainNode\").getComponent(\"DDZ_Main\").showTipStr(\"非法牌型，出牌失败\");\n};\nmodule.exports = GameAction;\ncc.YL.DDZGameAction = GameAction;"]}