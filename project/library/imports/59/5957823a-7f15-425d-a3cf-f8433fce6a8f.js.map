{"version":3,"sources":["../../../../../../../assets/mahjong/script/wahua/desk/assets/mahjong/script/wahua/desk/playerUiWahua.js"],"names":["SeatEnum","cc","Enum","xia","you","shang","zuo","JiaWeiArr","WhDefine","require","WhUtils","Class","extends","Component","properties","orignalIcon","type","SpriteFrame","default","iconSp","Sprite","nameLabel","Label","scoreLabel","scoreBg","Node","readyNode","noCardNode","quanNode","directNode","emojiNode","textNode","voiceNode","offlineNode","waitNode","buhuaLabel","paiPrefab","Prefab","tangPrefab","optCardPrefab","huPaiPrefab","onLoad","setWait","paiNode","node","getChildByName","shouPaiNode","pengGangNode","dachuPaiNode","enableSendN","_paiArray","Array","_chiGangArray","string","active","setData","data","uipos","fun","utils","loadUrlRes","imageUrl","userName","userId","score","onLine","currentState","showReady","_uipos","event","dispatch","onDestroy","_cards","clearDesk","removeAllChildren","moPai","cardNumber","log","setEnableSend","paiN","instantiate","parent","getComponent","setCardNumber","setPosition","p","length","pai","getCardById","card","spriteFrame","getSpriteFrameByCard","enable","checkCardEnable","setPaiEnable","i","cardArr","song","setCardShow","_paiLeftNumber","chuPai","cardInfo","flag","sendCard","id","chupaiNum","children","posx","posy","net","send","showChess","rsp","returnStatu","splice","order","setLocalZOrder","cards","_enableNumber","enableNumber","songCardArr","s","setPositionX","getPositionX","setChiGang","j","removeFromParent","pos","dir","opsNum","opt","typeN","nd","setHuan","setHu","chiGangPos","getPosition","c","xiaPaiAllDown","getPositionY","setPositionY","setScore","showNoCard","showQuan","setDirect","direct","setDirectEnable","setEmoji","emoji","setText","text","setVoice","voice","showOffLine","setBuhuaText","setXianVisible","paiMianAltas","getSpriteFrame"],"mappings":"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","file":"playerUiWahua.js","sourceRoot":"../../../../../../../assets/mahjong/script/wahua/desk","sourcesContent":["const SeatEnum = cc.Enum({\n    xia: 0,\n    you: 1,\n    shang: 2,\n    zuo: 3,\n});\nconst JiaWeiArr = ['tianjia', 'dijia', 'yinpai', 'changsan'];\nconst WhDefine = require('whDefine');\nconst WhUtils = require('whUtils');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        orignalIcon: {\n            type: cc.SpriteFrame,\n            default: null,\n        },\n\n        iconSp: {\n            type: cc.Sprite,\n            default: null,\n        },\n\n        nameLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        scoreLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        scoreBg: {\n            type: cc.Node,\n            default: null,\n        },\n\n        readyNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        noCardNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        quanNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        directNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        emojiNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        textNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        voiceNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        offlineNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        waitNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        buhuaLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        paiPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        tangPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        optCardPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        huPaiPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n    },\n\n    onLoad () {\n        this.setWait();\n        let paiNode = this.node.getChildByName('paiNode');\n        this.shouPaiNode = paiNode.getChildByName('shouPai');\n        this.pengGangNode = paiNode.getChildByName('pengGang');\n        this.dachuPaiNode = paiNode.getChildByName('dachuPai');\n        this.enableSendN = paiNode.getChildByName('enableSend');\n        this._paiArray = new Array();\n        this._chiGangArray = new Array();\n    },\n\n    setWait() {\n        this.iconSp.SpriteFrame = this.orignalIcon;\n        this.nameLabel.string = '';\n        this.scoreLabel.string = '';\n        this.scoreBg.active = false;\n        this.readyNode.active = false;\n        this.offlineNode.active = false;\n        this.waitNode.active = true;\n        this.buhuaLabel.string = '';\n    },\n\n    setData(data, uipos) {\n        this.data = data;\n        fun.utils.loadUrlRes(data.imageUrl, this.node.getChildByName('icon'));\n        this.nameLabel.string = data.userName + ' ' + data.userId;\n        this.scoreLabel.string = data.score || 0 // totalScore;\n        this.node.getChildByName('name').active = true;\n        this.node.getChildByName('score').active = true;\n        this.scoreBg.active = true;\n        this.waitNode.active = false;\n        if (data.onLine && data.onLine !== 1) {  //1在线， 2不在线\n            this.offlineNode.active = true;\n        }\n        if(data.currentState === 1){\n            this.showReady(true);\n        }\n        this._uipos = uipos;\n        fun.event.dispatch('wahuaInitCompleted', uipos);\n    },\n\n    onDestroy() {\n        this._paiArray = [];\n        this._cards = [];\n        this._chiGangArray = [];\n    },\n\n    clearDesk() {\n        this._paiArray = [];\n        this._cards = [];\n        this._chiGangArray = [];\n        this.shouPaiNode.removeAllChildren();\n        this.pengGangNode.removeAllChildren();\n        this.dachuPaiNode.removeAllChildren();\n    },\n\n    /**\n     * 玩家摸排\n     * @param {INT} cardNumber 牌id\n     */\n    moPai(cardNumber) {\n        cc.log('--- ' + this._uipos + ' moPai: ', cardNumber);\n        switch (this._uipos) {\n            case SeatEnum.xia:\n                {\n                    this.setEnableSend(true);\n                    let paiN = cc.instantiate(this.paiPrefab);\n                    paiN.parent = this.shouPaiNode;\n                    paiN.getComponent('whPaiTouch').setCardNumber(cardNumber);\n                    paiN.setPosition(cc.p(1160, -180));\n                    this._paiArray[this._paiArray.length] = paiN;;\n                    let pai = WhUtils.getCardById(cardNumber);\n                    let card = paiN.getChildByName('content').getComponent(cc.Sprite).spriteFrame = this.getSpriteFrameByCard(pai);\n                    let enable = WhUtils.checkCardEnable(cardNumber, this._cards);\n                    if (enable) {\n                        cc.log('--- enable, type: ', enable, typeof(enable));\n                        WhUtils.setPaiEnable(paiN, false, false);\n                        if (typeof (enable !== 'boolean')) {\n                            for (let i = 0; i < this._cards.cardArr.length; ++i) {\n                                if (this._cards.cardArr[i] === enable) {\n                                    WhUtils.setPaiEnable(this._paiArray[i], false, false);\n                                }\n                            }\n                        }\n                        if (typeof (enable) === 'object') {\n                            if (typeof(enable.song) === 'boolean') {\n                                WhUtils.setPaiEnable(paiN, true, true);\n                                paiN.getChildByName('song').active = true;\n                            } else {\n                                for (let i = 0; i < this._cards.cardArr.length; ++i) {\n                                    if (this._cards.cardArr[i] === enable.song) {\n                                        WhUtils.setPaiEnable(this._paiArray[i], true, true);\n                                        this._paiArray[i].getChildByName('song').active = true;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                break;\n            case SeatEnum.you:\n                this.setCardShow(this._paiLeftNumber + 1);\n                break;\n            case SeatEnum.shang:\n                this.setCardShow(this._paiLeftNumber + 1);\n                break;\n            case SeatEnum.zuo:\n                this.setCardShow(this._paiLeftNumber + 1);\n                break;\n            default:\n                break;\n        }\n    },\n\n    /**\n     * 玩家出牌\n     * @param {Array} cardInfo 牌的集合\n     */\n    chuPai(cardInfo, flag = false) {\n        if (!cardInfo) return;\n        let sendCard = cc.instantiate(this.tangPrefab);\n        let id = cardInfo.cardNumber ? cardInfo.cardNumber : cardInfo;\n        sendCard.getChildByName('content').getComponent(cc.Sprite).spriteFrame = this.getSpriteFrameByCard(WhUtils.getCardById(id));\n        sendCard.parent = this.dachuPaiNode;\n        // sendCard.cardNumber = id;\n        let chupaiNum = this.dachuPaiNode.children.length;\n        switch (this._uipos) {\n            case SeatEnum.xia:\n                {   \n                    let posx = 34 * (chupaiNum % 10 === 0 ? 10 : chupaiNum % 10), posy;\n                    if (chupaiNum <= 10) posy = 30;\n                    else if (chupaiNum > 10 && chupaiNum <= 20) posy = -15;\n                    else posy = -60;\n                    sendCard.setPosition(cc.p(posx + 400, posy));\n                    if (flag) {\n                        fun.net.send('PlayCard', { showChess: id }, function(rsp) {\n                            if (rsp.returnStatu && rsp.returnStatu !== 1) {\n                                cc.log('--- 出牌错误 ---');\n                            }\n                        });\n                        this.setEnableSend(false);\n                        for (let i = 0; i < this._cards.cardArr.length; ++i) {\n                            if (this._cards.cardArr[i] === id) {\n                                this._cards.cardArr.splice(i, 1);\n                            }\n                        }\n                        fun.event.dispatch('whNeedReSortCards', this._cards.cardArr);\n                    }\n                }\n                break;\n            case SeatEnum.you:\n                {\n                    let posx, posy = -20 * (chupaiNum % 10 === 0 ? 10 : chupaiNum % 10);\n                    if (chupaiNum <= 10) posx = 60;\n                    else if (chupaiNum > 10 && chupaiNum <= 20) posx = 30;\n                    else posx = 0;\n                    sendCard.setPosition(cc.p(posx, posy));\n                    if (flag) this.setCardShow(this._paiLeftNumber - 1);\n                }\n                break;\n            case SeatEnum.shang:\n                {\n                    let posx = -34 * (chupaiNum % 10 === 0 ? 10 : chupaiNum % 10), posy, order = 3;\n                    if (chupaiNum <= 10) {\n                        posy = -120;\n                        order = 3;\n                    } else if (chupaiNum > 10 && chupaiNum <= 20) {\n                        posy = -75;\n                        order = 2;\n                    } else {\n                        posy = -30;\n                        order = 1;\n                    }\n                    sendCard.setLocalZOrder(order);\n                    sendCard.setPosition(cc.p(posx - 205, posy));\n                    if (flag) this.setCardShow(this._paiLeftNumber - 1);\n                }\n                break;\n            case SeatEnum.zuo:\n                {\n                    let posx, posy = 20 * (chupaiNum % 10 === 0 ? 10 : chupaiNum % 10);\n                    if (chupaiNum <= 10) posx = 0;\n                    else if (chupaiNum > 10 && chupaiNum <= 20) posx = 30; \n                    else posx = 60;\n                    sendCard.setPosition(cc.p(posx, posy));\n                    if (flag) this.setCardShow(this._paiLeftNumber - 1);\n                }\n                break;\n            default:\n                break;\n        }\n    },\n\n    /**\n     * 牌的显示\n     * @param {*} cards     下: 排序后的牌/ 其他: 牌的数量\n     */\n    setCardShow(cards, flag = false) {\n        cc.log('--- setCardShow  cards: ', cards);\n        this.shouPaiNode.removeAllChildren();\n        this._paiArray = [];\n        this._paiLeftNumber = this._uipos === SeatEnum.xia ? cards.cardArr.length : cards;\n        switch(this._uipos){\n            case SeatEnum.xia:\n                {\n                    this._cards = cards;\n                    this._enableNumber = cards.enableNumber;\n                    for (let i = 0; i < cards.cardArr.length; ++i) {\n                        let posx, pai = WhUtils.getCardById(cards.cardArr[i]);\n                        if (cards.cardArr.length % 2 === 1) {\n                            posx = (i - cards.cardArr.length) * 60 + 1200;\n                        } else {\n                            posx = (i - 1 - cards.cardArr.length) * 60 + 1200;\n                            this.setEnableSend(false);\n                        }\n                        this._paiArray[i] = cc.instantiate(this.paiPrefab);\n                        this._paiArray[i].setPosition(cc.p(posx, -180));\n                        this._paiArray[i].parent = this.shouPaiNode;\n                        this._paiArray[i].getChildByName('song').active = false;\n                        this._paiArray[i].getChildByName('content').getComponent(cc.Sprite).spriteFrame = this.getSpriteFrameByCard(pai);\n                        this._paiArray[i].getComponent('whPaiTouch').setCardNumber(cards.cardArr[i]);\n                        WhUtils.setPaiEnable(this._paiArray[i], true, true);\n                        if (cards.songCardArr.length !== 0) {\n                            WhUtils.setPaiEnable(this._paiArray[i], false, false);\n                            for (let s = 0; s < cards.songCardArr.length; s++) {\n                                if (cards.cardArr[i] === cards.songCardArr[s]) {\n                                    this._paiArray[i].getChildByName('song').active = true;\n                                    WhUtils.setPaiEnable(this._paiArray[i], true, true);\n                                    break;\n                                }\n                            }\n                        } else {\n                            if (this._enableNumber > i) {\n                                WhUtils.setPaiEnable(this._paiArray[i], false, false);\n                            }\n                        }\n                    }\n                }\n                break;\n            case SeatEnum.you:\n                for (let i = 0; i < cards; ++i) {\n                    this._paiArray[i] = cc.instantiate(this.paiPrefab);\n                    let posy = (i - cards) * 30;\n                    this._paiArray[i].setPosition(cc.p(0, posy));\n                    this._paiArray[i].parent = this.shouPaiNode;\n                }\n                break;\n            case SeatEnum.shang:\n                for (let i = 0; i < cards; ++i) {\n                    this._paiArray[i] = cc.instantiate(this.paiPrefab);\n                    let posx;\n                    if (cards % 2 === 1) {\n                        posx = (i - 1) * 34 - 750;\n                    } else {\n                        posx = i * 34.5 - 750;\n                    }\n                    this._paiArray[i].setPosition(cc.p(posx, 50));\n                    this._paiArray[i].parent = this.shouPaiNode;\n                }\n                if (cards % 2 === 1 && !flag) {\n                    this._paiArray[0].setPositionX(this._paiArray[0].getPositionX() - 10);\n                }\n                break;\n            case SeatEnum.zuo:\n                for (let i = 0; i < cards; ++i) {\n                    this._paiArray[i] = cc.instantiate(this.paiPrefab);\n                    let posx = (-cards - i) * 34 + 100;\n                    this._paiArray[i].setPosition(cc.p(posx, -10));\n                    this._paiArray[i].parent = this.shouPaiNode;\n                }\n                break;\n            default:\n                break;\n        }\n    },\n\n    /**\n     * 吃杠\n     * @param {Array} cardArr \n     */\n    setChiGang(cardArr, flag = false) {\n        let type = cardArr.length === 3 ? 'gang' : 'chi';\n        if (this._uipos === SeatEnum.xia && flag) {\n            this.setEnableSend(true);\n            for (let i = 0; i < this._cards.cardArr.length; ++i) {\n                for (let j = 0; j < cardArr.length; ++j) {\n                    if (this._cards.cardArr[i] === cardArr[j]) {\n                        this._cards.cardArr.splice(i, 1);\n                    }\n                }\n            }\n            if (type === 'gang') this._paiArray[this._paiArray.length - 1].removeFromParent();\n            fun.event.dispatch('whNeedReSortCards', this._cards.cardArr);\n        } else {\n            if (flag) this.setCardShow(this._paiLeftNumber - cardArr.length + 1, true);\n        }\n        \n        let pos, dir, opsNum = this.pengGangNode.children.length;\n        switch (this._uipos) {\n            case SeatEnum.xia:\n                dir = 'xia';\n                pos = cc.p(120 * opsNum - 40, -180);\n                break;\n            case SeatEnum.you:\n                dir = 'you';\n                pos = cc.p(500, 40 * opsNum + 100);\n                break;\n            case SeatEnum.shang:\n                dir = 'shang';\n                pos = cc.p(-120 - 70 * opsNum, 50);\n                break;\n            case SeatEnum.zuo:\n                dir = 'zuo';\n                pos = cc.p(60, 500 - 40 * opsNum);\n                break;\n            default:\n                break;\n        }\n        let opt = cc.instantiate(this.optCardPrefab);\n        opt.setPosition(pos);\n        opt.parent = this.pengGangNode;\n        this._chiGangArray[this._chiGangArray.length] = cardArr;\n        for (let i = 0; i < cardArr.length; ++i) {\n            let typeN = opt.getChildByName(dir).getChildByName(type);\n            typeN.active = true;\n            let nd = typeN.getChildByName('card' + (i + 1));\n            nd.getChildByName('content').getComponent(cc.Sprite).spriteFrame = this.getSpriteFrameByCard(WhUtils.getCardById(cardArr[i]));\n        }\n    },\n\n    /**\n     * 替换白皮\n     * @param {Array} cardArr \n     */\n    setHuan(cardArr) {\n        for (let i = 0; i < this._chiGangArray.length; ++i) {\n            for (let j; j < cardArr.length; ++j) {\n                if (this._chiGangArray[i] === cardArr[j]) {\n                    cc.log('--- 替换白皮: i, j, sameCard: ', i, j, cardArr[j]);\n                    // this.pengGangNode.children[this.pengGangNode.children.length - 1];\n                    break;\n                }\n            }\n        }\n    },\n\n    /**\n     * 胡\n     * @param {Object} data \n     */\n    setHu(cardArr) {\n        cc.log('--- 胡牌 cardArr: ', cardArr);\n        this.shouPaiNode.removeAllChildren();\n        let pos, chiGangPos;\n        if (this.pengGangNode.children.length !== 0) {\n            this.pengGangNode.children[this.pengGangNode.children.length - 1].getPosition();\n        }\n        switch (this._uipos) {\n            case SeatEnum.xia:\n                chiGangPos = chiGangPos ? chiGangPos : -40;\n                pos = cc.p(chiGangPos + i * 60 + 20, 180)\n                break;\n            case SeatEnum.you:\n                chiGangPos = chiGangPos ? chiGangPos : -40;\n                pos = cc.p(chiGangPos - i * 34, -360)\n                break;\n            case SeatEnum.shang:\n                chiGangPos = chiGangPos ? chiGangPos : -120;\n                pos = cc.p(chiGangPos - i * 34, -360)\n                break;\n            case SeatEnum.zuo:\n                chiGangPos = chiGangPos ? chiGangPos : -40;\n                pos = cc.p(chiGangPos - i * 34, -360)\n                break;\n            default:\n                break;\n        }\n        cc.log('--- pos, chiGangPos: ', pos, chiGangPos);\n        for (let i = 0; i < cardArr; ++i) {\n            let c = cc.instantiate(this.huPaiPrefab);\n            c.setPosition(pos);\n            let pai = WhUtils.getCardById(cardArr[i]);\n            c.getChildByName('content').getComponent(cc.Sprite).spriteFrame = this.getSpriteFrameByCard(pai);\n            c.parent = this.shouPaiNode;\n        }\n        \n    },\n\n    /**\n     * 牌全部放下\n     */\n    xiaPaiAllDown() {\n        for (let i = 0; i < this._paiArray.length; ++i) {\n            if (this._paiArray[i].getPositionY() !== -180) {\n                this._paiArray[i].setPositionY(-180);\n            }\n        }\n    },\n\n    setEnableSend(flag) {\n        this.enableSendN.active = !flag;\n    },\n\n    setScore(score = 0) {\n        this.scoreLabel.string = score;\n    },\n\n    showReady(flag) {\n        this.readyNode.active = flag;\n    },\n\n    showNoCard(flag) {\n        this.noCardNode.active = flag;\n    },\n\n    showQuan(flag) {\n        this.quanNode.active = flag;\n    },\n\n    setDirect(direct) {\n        this.setDirectEnable();\n        this.directNode.active = true;\n        for (let i=0; i<JiaWeiArr.length; ++i) {\n            this.directNode.getChildByName(JiaWeiArr[i]).active = false;\n        }\n        this.directNode.getChildByName(JiaWeiArr[direct]).active = true;\n    },\n\n    setDirectEnable() {\n        this.directNode.active = false;\n    },\n\n    setEmoji(emoji) {\n    },\n\n    setText(text) {\n    },\n\n    setVoice(voice) {\n    },\n\n    showOffLine(flag) {\n        this.offlineNode.active = flag;\n    },\n\n    setBuhuaText(text) {\n        this.buhuaLabel.string = '补花: ' + text;\n    },\n\n    setXianVisible(flag) {\n        this.node.getChildByName('xian').active = flag;\n    },\n\n    getSpriteFrameByCard(card) {\n        return this.node.parent.getComponent('gameMgrWahua').paiMianAltas.getSpriteFrame(card);;\n    },\n\n});"]}