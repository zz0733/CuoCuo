{"version":3,"sources":["../../../../../../assets/hall/script/hall/assets/hall/script/hall/hallActivity.js"],"names":["GameTypeEnum","cc","Enum","wlmj","hymj","wlwh","ddz","scmj","LingQuError","FAILED","RECIVED","NOT_EXIST","NO_SELF","Class","extends","Component","properties","shareCardItem","Prefab","onLoad","bg","node","getChildByName","on","onBtnCloseClick","leftBox","rightBox","shareCardBox","shareReceiveCode","shareRecording","shareContent","lingCardBox","_menuNum","children","length","i","onActivityMenuShow","bind","animation","getComponent","Animation","clips","getClips","isApple","fun","gameCfg","releaseType","gameConst","apple","active","isFisher","fisher","destroy","onEnable","play","name","start","hd3","net","pSend","Type","rsp","_timeCardListFir","initShareCardShow","EditBox","string","initLingCardShow","event","add","data","_shareContentList","item","Label","Cnt","date","GameType","wxShareFriendCard","Order","ExpireAt","onDestroy","remove","count","shareScrollView","shareScrollViewSize","getContentSize","shareScrollViewCont","_shareGameType","List","shareCardListView","forEach","value","type","RetCode","Status","dispatch","contentStr","removeAllChildren","shareCardRecordView","inputL","parseInt","OrderId","orderId","itemL","newCardNum","substr","setData","ExpiredAt","setContentSize","width","height","itemSize","instantiate","_list","setPositionY","parent","contSize","itemHeight","noJiLu","scrollView","viewSize","contentN","isJiLu","editBox","editLabel","reg","test","t","Date","getFullYear","getMonth","getDate","getHours","getMinutes","order","expireAt","num","url","commonUrl","timeLimitCard","encodeURI","db","getData","UserName","info","title","content","require","WxShareFriend","playEffect","once"],"mappings":"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","file":"hallActivity.js","sourceRoot":"../../../../../../assets/hall/script/hall","sourcesContent":["const GameTypeEnum = cc.Enum({\n    wlmj: 1,\n    hymj: 3,\n    wlwh: 5,\n    ddz: 6,\n    scmj: 7,\n});\nconst LingQuError = cc.Enum({\n    FAILED: 1,\n    RECIVED: 2,\n    NOT_EXIST: 3,\n    NO_SELF: 4,\n});\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        shareCardItem: cc.Prefab,\n    },\n\n    onLoad () {\n        let bg = this.node.getChildByName('back');\n        bg.getChildByName('btnClose').on('click', this.onBtnCloseClick, this);\n        this.leftBox = bg.getChildByName('leftBox');\n        this.rightBox = bg.getChildByName('rightBox');\n        this.shareCardBox = bg.getChildByName('shareCardBox');\n        this.shareReceiveCode = bg.getChildByName('shareReceiveCode');\n        this.shareRecording = bg.getChildByName('shareRecording');\n        this.shareContent = bg.getChildByName('shareContent');\n        this.lingCardBox = bg.getChildByName('lingCardBox');\n        this._menuNum = this.rightBox.children.length;\n        for (let i=0; i<this._menuNum; ++i) {\n            this.leftBox.getChildByName('btnActivity'+(i+1)).on('click', this.onActivityMenuShow.bind(this, i+1));\n        }\n        this.onActivityMenuShow(1);\n\n        this.animation = this.node.getComponent(cc.Animation);\n        this.clips = this.animation.getClips()\n        let isApple = fun.gameCfg.releaseType === gameConst.releaseType.apple ? true : false;\n        if (isApple) {\n            this.leftBox.getChildByName('btnActivity2').active = false;\n        }\n        let isFisher = fun.gameCfg.releaseType === gameConst.releaseType.fisher ? true : false;\n        if (isFisher) {\n            this.leftBox.getChildByName('btnActivity3').destroy();\n            this.leftBox.getChildByName('btnDown3').destroy();\n            this._menuNum--;\n        }\n    },\n\n    onEnable () {\n        this.animation.play(this.clips[0].name);\n    },\n\n    start() {\n        let hd3 = this.rightBox.getChildByName('huodong3');\n        hd3.getChildByName('btnFx').on('click', function() {\n            fun.net.pSend('TimeCardList', { Type: GameTypeEnum.wlmj}, function(rsp) {\n                this._timeCardListFir = rsp;\n                this.shareCardBox.active = true;\n                this.initShareCardShow();\n            }.bind(this));\n        }.bind(this));\n        hd3.getChildByName('btnLing').on('click', function() {\n            this.shareReceiveCode.getChildByName('editBox').getComponent(cc.EditBox).string = '';\n            this.shareReceiveCode.active = true;\n        }.bind(this));\n        this.initLingCardShow();\n        fun.event.add('hallActivityItemNumber', 'shareCardItemNumber', function(data) {\n            this._shareContentList = data;\n            this.shareContent.getChildByName('InputLabel').getComponent(cc.EditBox).string = '';\n            this.shareContent.active = true;\n            let item = this.shareContent.getChildByName('item');\n            item.getChildByName('card').getComponent(cc.Label).string = 'x' + data.Cnt;\n            item.getChildByName('content').getComponent(cc.Label).string = '将在' + data.date + '过期';\n            item.getChildByName('img').getChildByName('ka' + data.GameType).active = true;\n        }.bind(this));\n        fun.event.add('hallActivityItemAgain', 'shareCardItemAgain', function(data) {\n            this.wxShareFriendCard(data.Order, data.ExpireAt, data.Cnt, data.date);\n        }.bind(this));\n    },\n\n    onDestroy() {\n        fun.event.remove('hallActivityItemNumber');\n        fun.event.remove('hallActivityItemAgain');\n    },\n\n    onActivityMenuShow (count) {\n        for(let i=0; i<this._menuNum; ++i){\n            this.leftBox.getChildByName('btnActivity'+(i+1)).active = true;\n            this.leftBox.getChildByName('btnDown'+(i+1)).active = false;\n            this.rightBox.getChildByName('huodong'+(i+1)).active = false;\n        }\n        this.leftBox.getChildByName('btnActivity'+count).active = false;\n        this.leftBox.getChildByName('btnDown'+count).active = true;\n        this.rightBox.getChildByName('huodong'+count).active = true;\n        this.shareCardBox.active = false;\n    },\n\n    //分享限时卡初始化\n    initShareCardShow() {\n        this.shareScrollView = this.shareCardBox.getChildByName('scrollView').getChildByName('view');\n        this.shareScrollViewSize = this.shareScrollView.getContentSize();\n        this.shareScrollViewCont = this.shareScrollView.getChildByName('content');\n        this._shareGameType = 0;\n        if (this._timeCardListFir.List) {\n            this._shareGameType = this._timeCardListFir.Type;\n            this.shareCardListView(this._timeCardListFir);\n        }\n        this.shareCardBox.getChildByName('tog').children.forEach(function (value) {\n            value.on('click', function() {\n                let type = GameTypeEnum[value.name];\n                if (this._shareGameType === type) return;\n                this._shareGameType = type;\n                fun.net.pSend('TimeCardList', { Type: type }, function(rsp) {\n                    if (!rsp || rsp.RetCode || rsp.Status) {\n                        fun.event.dispatch('MinSingleButtonPop', { contentStr: '查询分享限时卡失败！' });\n                    } else {\n                        if (rsp.List) {\n                            this.shareCardListView(rsp);\n                        } else {\n                            this.shareScrollViewCont.removeAllChildren();\n                        }\n                    }\n                }.bind(this));\n            }.bind(this));\n        }.bind(this));\n        this.shareCardBox.getChildByName('btnBack').on('click', function() {\n            this.shareCardBox.active = false;\n        }.bind(this));\n        this.shareCardBox.getChildByName('btnJl').on('click', function() {\n            fun.net.pSend('SharedTimeCardList', {}, function(rsp) {\n                if (!rsp || rsp.RetCode || rsp.Status) {\n                    fun.event.dispatch('MinSingleButtonPop', { contentStr: '查询分享限时卡记录失败！' });\n                } else {\n                    this.shareCardRecordView(rsp);\n                    this.shareRecording.active = true;\n                }\n            }.bind(this));\n        }.bind(this));\n        this.shareRecording.getChildByName('btnClose').on('click', function() {\n            this.shareRecording.active = false;\n        }.bind(this));\n        this.shareContent.getChildByName('btnFx').on('click', function() {\n            let inputL = parseInt(this.shareContent.getChildByName('InputLabel').getComponent(cc.EditBox).string);\n            if (!inputL || inputL <= 0) {\n                fun.event.dispatch('MinSingleButtonPop', { contentStr: '请输入正确的数字！' });\n            } else if (inputL > this._shareContentList.Cnt) {\n                fun.event.dispatch('MinSingleButtonPop', { contentStr: '你所分享的限时卡数量超过你拥有的数量！' });\n            } else {\n                fun.net.pSend('ShareTimeCard', { OrderId: this._shareContentList.OrderId, Cnt: inputL}, function(rsp) {\n                    if (!rsp || rsp.RetCode || rsp.Status) {\n                        fun.event.dispatch('MinSingleButtonPop', { contentStr: '分享限时房卡失败！' });\n                    } else {\n                        for (let i = 0; i < this.shareScrollViewCont.children.length; ++i) {\n                            let item = this.shareScrollViewCont.children[i];\n                            if (item.orderId === this._shareContentList.OrderId) {\n                                let itemL = item.getChildByName('card').getComponent(cc.Label);\n                                let newCardNum = parseInt(itemL.string.substr(1, itemL.string.length - 1)) - inputL;\n                                itemL.string = 'x' + newCardNum;\n                                this._shareContentList.Cnt = newCardNum;\n                                item.getComponent('shareCardItem').setData(this._shareContentList);\n                            }\n                        }\n                        this.wxShareFriendCard(rsp.Order, this._shareContentList.ExpiredAt, inputL, this._shareContentList.date);\n                    }\n                    this.shareContent.active = false;\n                }.bind(this));\n            }\n        }.bind(this));\n        this.shareContent.getChildByName('btnClose').on('click', function () {\n            this.shareContent.active = false;\n        }.bind(this))\n        this.shareContent.getChildByName('btnCancel').on('click', function () {\n            this.shareContent.active = false;\n        }.bind(this))\n    },\n    shareCardListView(data) {\n        this.shareScrollViewCont.removeAllChildren();\n        this.shareScrollViewCont.setContentSize(this.shareScrollViewSize.width, this.shareScrollViewSize.height);\n        let itemSize = 0;\n        for (let i = 0; i < data.List.length; i++) {\n            let item = cc.instantiate(this.shareCardItem);\n            let _list = data.List[i];\n            itemSize = item.getContentSize().height;\n            item.orderId = _list.OrderId;\n            item.setPositionY(-i * 0.85 * itemSize - 40);\n            _list.GameType = data.Type;\n            item.getComponent('shareCardItem').setData(_list);\n            item.parent = this.shareScrollViewCont;\n        }\n        let contSize = this.shareScrollViewCont.getContentSize();\n        let itemHeight = itemSize * data.List.length;\n        if (itemHeight > contSize.height) {\n            this.shareScrollViewCont.setContentSize(contSize.width, itemHeight);\n        }\n    },\n\n    //分享记录\n    shareCardRecordView(data) {\n        let noJiLu = this.shareRecording.getChildByName('noJiLu');\n        if (!data.List) {\n            noJiLu.active = true;\n            return;\n        }\n        noJiLu.active = false;\n        let scrollView = this.shareRecording.getChildByName('scrollView').getChildByName('view');\n        let viewSize = scrollView.getContentSize();\n        let contentN = scrollView.getChildByName('content');\n        contentN.removeAllChildren();\n        contentN.setContentSize(viewSize.width, viewSize.height);\n        let itemSize = 0;\n        for (let i = 0; i < data.List.length; ++i) {\n            let item = cc.instantiate(this.shareCardItem);\n            let _list = data.List[i];\n            itemSize = item.getContentSize().height;;\n            item.setPositionY(-i * 0.85 * itemSize - 40);\n            _list.isJiLu = true;\n            item.getComponent('shareCardItem').setData(_list);\n            item.parent = contentN;\n        }\n        let contSize = contentN.getContentSize();\n        let itemHeight = itemSize * data.List.length;\n        if (itemHeight > contSize.height) {\n            contentN.setContentSize(contSize.width, itemHeight);\n        }\n    },\n\n    //点击领取限时卡\n    initLingCardShow() {\n        let editBox = this.shareReceiveCode.getChildByName('editBox').getComponent(cc.EditBox);\n        this.shareReceiveCode.getChildByName('btnLing').on('click', function() {\n            let editLabel = editBox.string;\n            let reg = /^[0-9a-zA-Z]+$/;\n            if (editLabel.length < 16 || !reg.test(editLabel)) {\n                fun.event.dispatch('MinSingleButtonPop', { contentStr: '请输入正确的领取码！' });\n            } else {\n                fun.net.pSend('ReceiveTimeCard', { Order: editLabel }, function(rsp) {\n                    if (!rsp || rsp.RetCode) {\n                        fun.event.dispatch('MinSingleButtonPop', { contentStr: '领取限时房卡失败！' });\n                    } else if (rsp.Status) {\n                        switch (rsp.Status) {\n                            case LingQuError.NO_SELF:\n                                fun.event.dispatch('MinSingleButtonPop', { contentStr: '不能领取自己分享的限时卡！' });\n                                break;\n                            case LingQuError.RECIVED:\n                                fun.event.dispatch('MinSingleButtonPop', { contentStr: '领取码已被使用！' });\n                                break;\n                            case LingQuError.NOT_EXIST:\n                                fun.event.dispatch('MinSingleButtonPop', { contentStr: '领取码错误或限时卡过期！' });\n                                break;\n                            default:\n                                fun.event.dispatch('MinSingleButtonPop', { contentStr: '领取限时房卡失败！' });\n                                break;\n                        }\n                    } else {\n                        this.lingCardBox.getChildByName('img').getChildByName('ka' + rsp.GameType).active = true;\n                        this.lingCardBox.getChildByName('num').getComponent(cc.Label).string = 'x' + rsp.Cnt;\n                        let t = new Date(rsp.ExpireAt * 1000);\n                        let date = t.getFullYear() + '年' + (t.getMonth() + 1) + '月' + t.getDate() + '日' + t.getHours() + '时' + t.getMinutes() + '分';\n                        this.lingCardBox.getChildByName('time').getComponent(cc.Label).string = '到期时间: ' + date;\n                        this.shareReceiveCode.active = false;\n                        this.lingCardBox.active = true;\n                    }\n                }.bind(this));\n            }\n        }.bind(this));\n        this.shareReceiveCode.getChildByName('btnClose').on('click', function() {\n            this.shareReceiveCode.active = false;\n        }.bind(this));\n        this.shareReceiveCode.getChildByName('btnCancel').on('click', function () {\n            this.shareReceiveCode.active = false;\n        }.bind(this));\n        this.lingCardBox.getChildByName('btnLing').on('click', function () {\n            this.lingCardBox.active = false;\n        }.bind(this));\n    },\n\n    wxShareFriendCard(order, expireAt, num, date) {\n        let url = gameConst.commonUrl.timeLimitCard;\n        let name = encodeURI(fun.db.getData('UserInfo').UserName);\n        let info = {};\n        info.title = '收到新的限时卡';\n        info.content = '请在' + date + '领取';\n        info.url = url + '?' + 'fkid=' + order + '&fknumber=' + num + '&fkname=' + name + '&fkdate=' + expireAt;\n        require('JSPhoneWeChat').WxShareFriend(info);\n    },\n\n    onBtnCloseClick () {\n        require('Audio').playEffect('hall', 'button_close.mp3');\n        this.animation.play(this.clips[1].name).once('finished', function () {\n            this.node.destroy();\n        }, this);\n    },\n});"]}