{"version":3,"sources":["../../../../../../assets/hall/script/hall/assets/hall/script/hall/hall.js"],"names":["GameCfg","require","Audio","cc","Class","extends","Component","properties","createMajiangRoomHY","type","Prefab","default","createMajiangRoomWL","createSanGongRoomPre","createNiuNiuRoomPre","createRoomWahua","createRoomDDZ","createRoomXuezhan","zhanjiLayerPre","activityPre","hallSharePre","moreGamePre","newsLayerPre","renzhengPre","setPanelPre","storePre","onLoad","_isTestnet","fun","gameCfg","loginUrl","gameConst","loginUrlType","test","_isIntranet","intranet","YL","_isTestServer","_isRelease","releaseType","release","_isApple","apple","_isFisher","fisher","sys","isNative","getBaiDuLocation","enterRoomHandle","addEnterRoomHandle","gameType","universal","platformEnterRoomHandle","bind","maJiangHuangYan","mahjongEnterRoomHandle","maJiangWenLing","digFlower","digFlowerEnterRoomHandle","DDZ","DDZEnterRoomHandle","scMahjong","net","setGameMsgCfg","voiceLanguage","localStorage","getItem","valumeData","JSON","parse","s","sound","m","music","soundValume","musicValume","_mainBasic","node","getChildByName","upNode","renzhengBtn","on","onRenzhengBtnClick","head","onHeadClick","userInfo","db","getData","showUserInfo","RoomId","enterRoom","initNode","setTimeout","getNeedNotice","notice","getComponent","Animation","play","active","setNeedNotice","animState","once","leftNode","onBtnJoinClick","gameBtns","rightNode","i","onBtnGameClick","push","length","appleReview","buttomNode","onRecordBtnClick","onShareBtnClick","onSetBtnClick","onActiveBtnClick","newsBtn","onNewsBtnClick","redPoint","onNewMailIdIn","playMusic","Label","string","version","event","add","onReplayInfoIn","applePayStr","onPhonePayResultAck","buttom","setPositionX","setPositionY","getPositionY","btnJoin","setPosition","p","msg","check","pSend","ReceiptStr","receipt","data","RetCode","Status","setItem","stringify","handler","roomId","dispatch","flag","text","Address","location","rsp","GameType","contentStr","pRetCode","returnStatu","setData","director","loadScene","gameTypeSceneNameMap","retMsg","code","err","codeCfg","mjGameDefine","HYRETCODE","WLRETCODE","SCRETCODE","EnterRoom","self","gotoStore","showStore","okBtnStr","okCb","isApple","isIntranet","store","instantiate","parent","setGameType","playEffect","renzheng","UserName","UserId","utils","loadUrlRes","UserHeadUrl","record","base64","decode","setReplayData","DDZReplayData","mId","index","hyNode","showRoomCard","wlNode","DDZNode","xzNode","onBtnGameMoreClick","gameMore","Start","zhanjiLayer","init","Type","itemCsv","voucher","hallShare","setLeftTicket","Cnt","news","Page","Count","mInfos","setPanel","activity","enter","x","y","onStoreBtnClick","onDestroy","remove","stopMusic"],"mappings":"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","file":"hall.js","sourceRoot":"../../../../../../assets/hall/script/hall","sourcesContent":["let GameCfg = require('GameCfg')\nlet Audio = require('Audio');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        createMajiangRoomHY: {\n            type: cc.Prefab,\n            default: null,\n        },\n        createMajiangRoomWL: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        createSanGongRoomPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        createNiuNiuRoomPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        createRoomWahua: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        createRoomDDZ: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        createRoomXuezhan: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        zhanjiLayerPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        activityPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        hallSharePre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        moreGamePre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        newsLayerPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        renzhengPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        setPanelPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        storePre: {\n            type: cc.Prefab,\n            default: null,\n        },\n    },\n\n    onLoad() {\n        this._isTestnet = fun.gameCfg.loginUrl === gameConst.loginUrl[gameConst.loginUrlType.test] ? true : false;\n        this._isIntranet = fun.gameCfg.loginUrl === gameConst.loginUrl[gameConst.loginUrlType.intranet] ? true : false;\n        cc.YL._isTestServer = this._isTestnet || this._isIntranet;// 保存当前的服务器类型，是否是测试\n        this._isRelease = fun.gameCfg.releaseType === gameConst.releaseType.release ? true : false;\n        this._isApple = fun.gameCfg.releaseType === gameConst.releaseType.apple ? true : false;\n        this._isFisher = fun.gameCfg.releaseType === gameConst.releaseType.fisher ? true : false;\n        if (cc.sys.isNative) {\n            require('JSPhoneBaiDu').getBaiDuLocation();\n        }\n        this.enterRoomHandle = [];\n        this.addEnterRoomHandle(gameConst.gameType.universal, this.platformEnterRoomHandle.bind(this));\n        this.addEnterRoomHandle(gameConst.gameType.maJiangHuangYan, this.mahjongEnterRoomHandle.bind(this));\n        this.addEnterRoomHandle(gameConst.gameType.maJiangWenLing, this.mahjongEnterRoomHandle.bind(this));\n        this.addEnterRoomHandle(gameConst.gameType.digFlower, this.digFlowerEnterRoomHandle.bind(this));\n        this.addEnterRoomHandle(gameConst.gameType.DDZ, this.DDZEnterRoomHandle.bind(this));\n        this.addEnterRoomHandle(gameConst.gameType.scMahjong, this.mahjongEnterRoomHandle.bind(this));\n        fun.net.setGameMsgCfg({});\n        fun.gameCfg.voiceLanguage = cc.sys.localStorage.getItem('voiceLanguage') || fun.gameCfg.voiceLanguage;\n        let valumeData = cc.sys.localStorage.getItem('valumeData');\n        if (valumeData) {\n            valumeData = JSON.parse(valumeData);\n            let s = valumeData.sound, m = valumeData.music;\n            fun.gameCfg.soundValume = (s && s > 0) ? s : (s === 0 ? 0 : 0.8);\n            fun.gameCfg.musicValume = (m && m > 0) ? m : (m === 0 ? 0 : 0.8);\n        }\n\n        this._mainBasic = this.node.getChildByName('mainBasic');\n        this.upNode = this._mainBasic.getChildByName('up');\n        this.renzhengBtn = this.upNode.getChildByName('renzhengBtn');\n        this.renzhengBtn.on('click', this.onRenzhengBtnClick, this);\n        this.head = this.upNode.getChildByName('head');\n        this.head.on('click', this.onHeadClick, this);\n        const userInfo = fun.db.getData('UserInfo');\n        this.showUserInfo(userInfo);\n        if (userInfo.RoomId && userInfo.RoomId != 0) {\n            this.enterRoom(userInfo.RoomId);\n        } else {\n            // if (!this._isIntranet && !this._isTestnet) {\n                let initNode = this.node;\n                setTimeout(function () {\n                    if (!fun.db.getNeedNotice()) {\n                        let notice = initNode.getChildByName('notice');\n                        notice.getComponent(cc.Animation).play('popScaleAnim');\n                        notice.active = true;\n                        fun.db.setNeedNotice(true);\n                        notice.getChildByName('back').getChildByName('box').getChildByName('btnClose').on('click', function () {\n                            let animState = notice.getComponent(cc.Animation).play('popScaleOut');\n                            animState.once('finished', function () {\n                                notice.active = false;\n                            });\n                        });\n                    }\n                }, 500);\n            // }\n        }\n        this.leftNode = this._mainBasic.getChildByName('left');\n        this.leftNode.getChildByName('btnJoin').on('click', this.onBtnJoinClick, this);\n\n        this.gameBtns = [];\n        this.rightNode = this._mainBasic.getChildByName('right');\n        for (let i = 0; i < 4; i++) {\n            this.gameBtns[i] = this.rightNode.getChildByName(\"btnGame\" + (i + 1));\n            this.gameBtns[i].active = true;\n            this.gameBtns[i].on('click', this.onBtnGameClick.bind(this, i));\n        }\n        this.gameBtns.push(this.rightNode.getChildByName('btnGameMore'));\n        this.gameBtns[this.gameBtns.length - 1].on('click', this.onBtnGameClick.bind(this, this.gameBtns.length - 1));\n        \n        this.appleReview(); //苹果审核用\n        this.buttomNode = this._mainBasic.getChildByName('buttom');\n        this.buttomNode.getChildByName('recordBtn').on('click', this.onRecordBtnClick, this);\n        this.buttomNode.getChildByName('shareBtn').on('click', this.onShareBtnClick, this);\n        this.buttomNode.getChildByName('setBtn').on('click', this.onSetBtnClick, this);\n        this.buttomNode.getChildByName('activeBtn').on('click', this.onActiveBtnClick, this);\n        let newsBtn = this.buttomNode.getChildByName('newsBtn');\n        newsBtn.on('click', this.onNewsBtnClick, this);\n        this.redPoint = newsBtn.getChildByName('redPoint');\n        this.onNewMailIdIn(fun.db.getData('NewMailId'));\n\n        Audio.playMusic('hall', 'BGM-mainUI.mp3');\n        this.node.getChildByName('mainBasic').getChildByName('version').getComponent(cc.Label).string = gameConst.version;\n        fun.event.add('HallUserInfo', 'UserInfo', this.showUserInfo.bind(this));\n        fun.event.add('HallReplayInfo', 'ReplayInfo', this.onReplayInfoIn.bind(this));\n        fun.event.add('HallEnterRoomId', 'EnterRoomId', this.enterRoom.bind(this));\n        fun.event.add('HallNewMailId', 'NewMailId', this.onNewMailIdIn.bind(this));\n\n        let applePayStr = JSON.parse(cc.sys.localStorage.getItem('applePayReceiptStr'));\n        this.onPhonePayResultAck(applePayStr);\n\n\n    },\n\n    appleReview() {\n        if (this._isApple) {\n            let buttom = this.node.getChildByName('mainBasic').getChildByName('buttom');\n            buttom.getChildByName('recordBtn').setPositionX(-420);\n            buttom.getChildByName('activeBtn').setPositionX(-140);\n            buttom.getChildByName('newsBtn').setPositionX(140);\n            buttom.getChildByName('setBtn').setPositionX(420);\n            buttom.getChildByName('shareBtn').active = false;\n            this.upNode.getChildByName('storeBtn').active = true;\n            this._mainBasic.getChildByName('Songka').active = false;\n\n            this.gameBtns[0].setPositionY(100);\n            this.gameBtns[1].setPositionY(100);\n            this.gameBtns[2].active = false;\n            this.gameBtns[3].active = false;\n            let notice = this.leftNode.getChildByName('Notice');\n            notice.setPositionY(notice.getPositionY() - 70);\n            let btnJoin = this.leftNode.getChildByName('btnJoin');\n            btnJoin.setPosition(cc.p(230, btnJoin.getPositionY() + 50));\n        }\n    },\n\n    onPhonePayResultAck(msg) {\n        if (msg && msg.check) {\n            fun.net.pSend('ApPay', { ReceiptStr: msg.receipt }, function (data) {\n                if (data.RetCode && data.RetCode !== 0) {\n                    setTimeout(function () {\n                        this.onPhonePayResultAck(msg);\n                    }.bind(this), 5000);\n                } else {\n                    if (data.Status && data.Status === 1) {\n                        cc.sys.localStorage.setItem('applePayReceiptStr', JSON.stringify({ check: false }));\n                    } else {\n                        setTimeout(function () {\n                            this.onPhonePayResultAck(msg);\n                        }.bind(this), 5000);\n                    }\n                }\n            }.bind(this));\n        }\n    },\n\n    addEnterRoomHandle(gameType, handler) {\n        this.enterRoomHandle[gameType] = handler;\n    },\n\n    enterRoom(roomId = 0) {\n        fun.event.dispatch('Zhuanquan', { flag: true, text: '加入房间中，请稍后...' });\n        fun.net.pSend('EnterRoom', { RoomId: roomId, Address: fun.db.getData('UserInfo').location }, function (rsp) {\n            if (rsp.GameType && this.enterRoomHandle[rsp.GameType]) {\n                this.enterRoomHandle[rsp.GameType](rsp);\n            } else {\n                fun.event.dispatch('MinSingleButtonPop', { contentStr: gameConst.pRetCode[rsp.RetCode] });\n                fun.event.dispatch('Zhuanquan', { flag: false });\n            }\n\n        }.bind(this));\n    },\n\n    platformEnterRoomHandle(data) {\n        fun.event.dispatch('Zhuanquan', { flag: false });\n        switch (data.RetCode) {\n            case 1:\n                fun.event.dispatch('MinSingleButtonPop', { contentStr: '服务器忙' });\n                break;\n            case 13:\n                fun.event.dispatch('MinSingleButtonPop', { contentStr: '房间未找到' });\n        }\n    },\n\n    digFlowerEnterRoomHandle(data) {\n        if (data.returnStatu && data.returnStatu === 1) {\n            fun.db.setData('RoomInfo', data);\n            cc.director.loadScene(gameConst.gameTypeSceneNameMap[data.GameType]);\n        } else {\n            fun.event.dispatch('Zhuanquan', { flag: false });\n        }\n    },\n    DDZEnterRoomHandle: function (data) {\n        if (data.retMsg.code < 0) {\n            cc.YL.err(data.retMsg.code);\n        } else {\n            cc.director.loadScene(\"DDZ_GameScene\");\n        }\n\n    },\n    mahjongEnterRoomHandle(data) {\n        var codeCfg = {};\n        var mjGameDefine = require(\"mjGameDefine\");\n        if (data.GameType == gameConst.gameType.maJiangHuangYan) {\n            codeCfg = mjGameDefine.HYRETCODE;\n        } else if (data.GameType == gameConst.gameType.maJiangWenLing) {\n            codeCfg = mjGameDefine.WLRETCODE;\n        } else if (data.GameType == gameConst.gameType.scMahjong) {\n            codeCfg = mjGameDefine.SCRETCODE;\n        }\n        if (!data.RetCode) {\n            data.EnterRoom = 'enter';\n            fun.db.setData('RoomInfo', data);\n            cc.director.loadScene(gameConst.gameTypeSceneNameMap[data.GameType]);\n        } else {\n            var self = this;\n            //房卡不足，跳转商店\n            if (data.RetCode == 19) {\n                var gotoStore = function () {\n                    self.showStore(data.GameType);\n                };\n                fun.event.dispatch('MinSingleButtonPop', {\n                    contentStr: codeCfg[data.RetCode],\n                    okBtnStr: \"前往充值\",\n                    okCb: gotoStore\n                });\n            } else {\n                fun.event.dispatch('MinSingleButtonPop', { contentStr: codeCfg[data.RetCode] });\n            }\n            fun.event.dispatch('Zhuanquan', { flag: false });\n        }\n    },\n\n    showStore(gameType) {\n        let isApple = fun.gameCfg.releaseType === gameConst.releaseType.apple ? true : false;\n        let isIntranet = fun.gameCfg.loginUrl === gameConst.loginUrl[gameConst.loginUrlType.intranet] ? true : false;\n        if (isApple || isIntranet) {\n            let store = cc.instantiate(this.storePre);\n            store.parent = this.node;\n            store.getComponent('store').setGameType(gameType);\n        } else {\n            fun.event.dispatch('MinSingleButtonPop', { contentStr: '公测期间，免费畅玩！' });\n        }\n    },\n\n    onRenzhengBtnClick() {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        if (this._isApple) {\n            fun.event.dispatch('MinSingleButtonPop', { contentStr: '敬请期待！' });\n        }\n        return;\n        let renzheng = cc.instantiate(this.renzhengPre);\n        renzheng.parent = this.node;\n    },\n\n    onHeadClick() {\n\n    },\n\n    showUserInfo(data) {\n        this.head.getChildByName('nickname').getComponent(cc.Label).string = data.UserName;\n        this.head.getChildByName('userid').getComponent(cc.Label).string = data.UserId;\n        fun.utils.loadUrlRes(data.UserHeadUrl, this.head.getChildByName('border'));\n    },\n\n    onReplayInfoIn(data) {\n        data.record = JSON.parse(fun.base64.decode(data.record));\n        switch (data.gameType) {\n            case gameConst.gameType.maJiangWenLing:\n                require(\"mjReplayMgr\").setReplayData(gameConst.gameType.maJiangWenLing, data)\n                break;\n            case gameConst.gameType.maJiangHuangYan:\n                require(\"mjReplayMgr\").setReplayData(gameConst.gameType.maJiangHuangYan, data)\n                break;\n            case gameConst.gameType.DDZ: {\n                cc.YL.DDZReplayData = data.record;\n                cc.director.loadScene(\"DDZ_ReplayScene\");\n                break;\n            }\n        }\n    },\n\n    onNewMailIdIn(mId) {\n        this.redPoint.active = mId > 0;\n    },\n\n    onBtnGameClick(index) {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        switch (index) {\n            case 0:\n                fun.net.pSend('RoomCard', { GameType: gameConst.gameType.maJiangHuangYan }, function (data) {\n                    if (data.RetCode && data.RetCode !== 0) return;\n                    var hyNode = cc.instantiate(this.createMajiangRoomHY);\n                    hyNode.parent = this.node;\n                    hyNode.getComponent('createMajiangRoom').showRoomCard(data, gameConst.gameType.maJiangHuangYan);\n                }.bind(this));\n                break;\n            case 1:\n                fun.net.pSend('RoomCard', { GameType: gameConst.gameType.maJiangWenLing }, function (data) {\n                    if (data.RetCode && data.RetCode !== 0) return;\n                    var wlNode = cc.instantiate(this.createMajiangRoomWL);\n                    wlNode.parent = this.node;\n                    wlNode.getComponent('createMajiangRoom').showRoomCard(data, gameConst.gameType.maJiangWenLing);\n                }.bind(this));\n                break;\n            case 2:\n                fun.event.dispatch('MinSingleButtonPop', {contentStr: '敬请期待！'});\n                return;\n                // let sgNode = cc.instantiate(this.createSanGongRoomPre);\n                // sgNode.parent = this.node;\n                fun.net.pSend('RoomCard', { GameType: gameConst.gameType.DDZ }, function (data) {\n                    if (data.RetCode && data.RetCode !== 0) return;\n                    let DDZNode = cc.instantiate(this.createRoomDDZ);\n                    DDZNode.parent = this.node;\n                    DDZNode.getComponent('createDDZRoom').showRoomCard(data, gameConst.gameType.DDZ);\n                }.bind(this));\n                break;\n            case 3:\n                fun.event.dispatch('MinSingleButtonPop', {contentStr: '敬请期待！'});\n                return;\n                fun.net.pSend('RoomCard', { GameType: gameConst.gameType.scMahjong }, function (data) {\n                    // if (data.RetCode && data.RetCode !== 0) return;\n                    let xzNode = cc.instantiate(this.createRoomXuezhan);\n                    xzNode.parent = this.node;\n                    xzNode.getComponent('createScMahjongRoom').showRoomCard(data, gameConst.gameType.scMahjong);\n                }.bind(this));\n                /**\n                 * 挖花\n                fun.net.pSend('RoomCard', {GameType: gameConst.gameType.digFlower}, function (data) {\n                    if (data.RetCode && data.RetCode !== 0) return;\n                    let whNode = cc.instantiate(this.createRoomWahua);\n                    whNode.parent = this.node;\n                    whNode.getComponent('createWahuaRoom').showRoomCard(data, gameConst.gameType.digFlower);\n                }.bind(this));\n                */\n                break;\n        }\n    },\n\n    onBtnGameMoreClick() {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        fun.event.dispatch('MinSingleButtonPop', { contentStr: '敬请期待！' });\n        return;\n        let gameMore = cc.instantiate(this.moreGamePre);\n        gameMore.parent = this.node;\n    },\n\n    onRecordBtnClick() {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        const gameType = gameConst.gameType.maJiangHuangYan;\n        fun.net.pSend('StandingBrief', { GameType: gameType, Start: 0 }, function (data) {\n            let zhanjiLayer = cc.instantiate(this.zhanjiLayerPre);\n            zhanjiLayer.parent = this.node;\n            zhanjiLayer.getComponent('zhanjiLayer').init(gameType, data);\n        }.bind(this));\n    },\n\n    onShareBtnClick() {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        fun.net.pSend('GoodCnt', { Type: gameConst.itemCsv.voucher }, function (data) {\n            if (data.RetCode && data.RetCode !== 0) {\n                fun.event.dispatch('MinSingleButtonPop', { contentStr: '查询兑换券失败!' });\n                return;\n            }\n            let hallShare = cc.instantiate(this.hallSharePre);\n            hallShare.parent = this.node;\n            hallShare.getComponent('hallShare').setLeftTicket(data.Cnt);\n        }.bind(this));\n    },\n\n    onNewsBtnClick() {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        if (this._isApple || this._isRelease) {\n            let news = cc.instantiate(this.newsLayerPre);\n            news.parent = this.node;\n        } else {\n            fun.net.pSend('MailList', { Page: 0, Count: 10 }, function (rsp) {\n                fun.db.setData('NewMailId', false);\n                let news = cc.instantiate(this.newsLayerPre);\n                news.parent = this.node;\n                news.getComponent('mailLayer').init(10, rsp.mInfos);\n            }.bind(this));\n        }\n    },\n\n    onSetBtnClick() {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        let setPanel = cc.instantiate(this.setPanelPre);\n        setPanel.parent = this.node;\n    },\n\n    onActiveBtnClick() {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        let activity = cc.instantiate(this.activityPre);\n        activity.parent = this.node;\n    },\n\n    onBtnJoinClick() {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        let enter = this.node.getChildByName('enterRoom');\n        enter.active = true;\n        enter.x = 0;\n        enter.y = 0;\n    },\n\n    onStoreBtnClick() {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        let store = cc.instantiate(this.storePre);\n        store.parent = this.node;\n    },\n\n    onDestroy() {\n        fun.event.remove('HallUserInfo');\n        fun.event.remove('HallReplayInfo');\n        fun.event.remove('HallEnterRoomId');\n        fun.event.remove('HallNewMailId');\n        Audio.stopMusic();\n\n    },\n});\n"]}