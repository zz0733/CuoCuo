{"version":3,"sources":["../../../../../../../assets/poker/DDZ/Script/Desk/assets/poker/DDZ/Script/Desk/DDZ_Setting.js"],"names":["Audio","require","cc","Class","extends","Component","properties","onLoad","bg","node","getChildByName","soundToggle","getComponent","Toggle","soundProgress","ProgressBar","soundSlider","fun","gameCfg","soundValume","isChecked","progressBar","JSON","parse","sys","localStorage","getItem","s","_soundProgress","sound","progress","Slider","on","onSoundSliderSlide","musicToggle","musicProgress","musicSlider","musicValume","m","_musicProgress","music","onMusicSliderSlide","onBtnCloseClick","animation","Animation","clips","getClips","onEnable","play","name","event","detail","onSoundToggleClicked","_soundVolum","onMusicToggleClicked","_musicVolum","playEffect","valumeData","stringify","setItem","once","destroy","YL","DDZAudio","playBGM"],"mappings":"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","file":"DDZ_Setting.js","sourceRoot":"../../../../../../../assets/poker/DDZ/Script/Desk","sourcesContent":["let Audio = require('Audio');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n    },\n\n    onLoad() {\n        let bg = this.node.getChildByName('back');\n        this.soundToggle = bg.getChildByName('soundToggle').getComponent(cc.Toggle);\n        this.soundProgress = bg.getChildByName('soundProgress').getComponent(cc.ProgressBar);\n        this.soundSlider = bg.getChildByName('soundSlider');\n        if (fun.gameCfg.soundValume === 0) {\n            this.soundToggle.isChecked = false;\n        } else {\n            this.soundToggle.isChecked = true;\n        }\n        let progressBar = JSON.parse(cc.sys.localStorage.getItem('progressBar'));\n        let s = fun.gameCfg.soundValume;\n        this._soundProgress = progressBar ? (progressBar.sound ? progressBar.sound : s) : s;\n        this.soundProgress.progress = this._soundProgress;\n        this.soundSlider.getComponent(cc.Slider).progress = this._soundProgress;\n        this.soundSlider.on('slide', this.onSoundSliderSlide, this);\n\n        this.musicToggle = bg.getChildByName('musicToggle').getComponent(cc.Toggle);\n        this.musicProgress = bg.getChildByName('musicProgress').getComponent(cc.ProgressBar);\n        this.musicSlider = bg.getChildByName('musicSlider');\n        if (fun.gameCfg.musicValume === 0) {\n            this.musicToggle.isChecked = false;\n        } else {\n            this.musicToggle.isChecked = true;\n        }\n        let m = fun.gameCfg.musicValume;\n        this._musicProgress = progressBar ? (progressBar.music ? progressBar.music : m) : m;\n        this.musicProgress.progress = this._musicProgress;\n        this.musicSlider.getComponent(cc.Slider).progress = this._musicProgress;\n        this.musicSlider.on('slide', this.onMusicSliderSlide, this);\n\n        bg.getChildByName('btnClose').on('click', this.onBtnCloseClick, this);\n        this.animation = this.node.getComponent(cc.Animation);\n        this.clips = this.animation.getClips();\n    },\n\n    onEnable () {\n        this.animation.play(this.clips[0].name);\n    },\n\n    onSoundSliderSlide (event) {\n        this.soundProgress.progress = event.detail.progress;\n        fun.gameCfg.soundValume = event.detail.progress;\n        this._soundProgress = fun.gameCfg.soundValume;\n        if (this._soundProgress === 0)\n            this.soundToggle.isChecked = false;\n        else\n            this.soundToggle.isChecked = true;\n    },\n\n    onMusicSliderSlide (event) {\n        this.musicProgress.progress = event.detail.progress;\n        fun.gameCfg.musicValume = event.detail.progress;\n        this._musicProgress = fun.gameCfg.musicValume;\n        if (this._musicProgress === 0)\n            this.musicToggle.isChecked = false;\n        else\n            this.musicToggle.isChecked = true;\n    },\n\n    onSoundToggleClicked () {\n        if(this.soundToggle.isChecked == true){\n            this._soundProgress = 0.5;\n        }\n        this._soundVolum = this.soundToggle.isChecked ? this._soundProgress : 0;\n        fun.gameCfg.soundValume = this._soundVolum;\n        this.soundProgress.progress = this._soundVolum;\n        this._soundProgress = fun.gameCfg.soundValume;\n        this.soundSlider.getComponent(cc.Slider).progress = this._soundProgress;\n    },\n\n    onMusicToggleClicked () {\n        if( this.musicToggle.isChecked == true){\n            this._musicProgress = 0.5;\n        }\n        this._musicVolum = this.musicToggle.isChecked ? this._musicProgress : 0;\n        fun.gameCfg.musicValume = this._musicVolum;\n        this.musicProgress.progress = this._musicVolum;\n        this._musicProgress = this._musicVolum;\n        this.musicSlider.getComponent(cc.Slider).progress = this._musicProgress;\n    },\n\n\n\n\n    onBtnCloseClick() {\n        Audio.playEffect('hall', 'button_close.mp3');\n        if(this.soundToggle.isChecked == false){\n            this._soundProgress = 0;\n        }\n        if( this.musicToggle.isChecked == false){\n            this._musicProgress = 0;\n        }\n        fun.gameCfg.musicValume =   this._musicProgress;\n        fun.gameCfg.soundValume =  this._soundProgress;\n        let valumeData = JSON.stringify({sound: fun.gameCfg.soundValume, music: fun.gameCfg.musicValume});\n        cc.sys.localStorage.setItem('valumeData', valumeData);\n        let progressBar = JSON.stringify({sound: this._soundProgress, music: this._musicProgress});\n        cc.sys.localStorage.setItem('progressBar', progressBar);\n        this.animation.play(this.clips[1].name).once('finished', function () {\n            this.node.destroy();\n        }, this);\n        cc.YL.DDZAudio.playBGM();\n    },\n\n\n\n});\n"]}