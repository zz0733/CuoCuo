{"version":3,"sources":["interact.js"],"names":["interactCfg","node","Audio","require","cc","Class","extends","Component","properties","start","show","data","startWorldPos","endWoldPos","isExchange","hideAll","startPos","endPos","convertToNodeSpaceAR","nodeName","content","animNode","getChildByName","active","setPosition","spAnim","getComponent","sp","Skeleton","moveTime","pDistance","moveAct","sequence","moveTo","callFunc","playEffect","moveActEnd","bind","runAction","setAnimation","children","forEach","child","setCompleteListener","close","removeFromParent"],"mappings":";;;;;;AAAA,IAAMA,cAAc;AAChB,aAAW,EAACC,MAAK,QAAN,EADK;AAEhB,cAAW,EAACA,MAAK,QAAN,EAFK;AAGhB,WAAW,EAACA,MAAK,QAAN,EAHK;AAIhB,WAAW,EAACA,MAAK,QAAN,EAJK;AAKhB,eAAW,EAACA,MAAK,QAAN,EALK;AAMhB,eAAW,EAACA,MAAK,QAAN,EANK;AAOhB,cAAW,EAACA,MAAK,QAAN,EAPK;AAQhB,eAAW,EAACA,MAAK,QAAN,EARK;AAShB,WAAW,EAACA,MAAK,QAAN;AATK,CAApB;AAWA,IAAIC,QAAQC,QAAQ,OAAR,CAAZ;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;AAML;;AAEAC,SARK,mBAQI,CAER,CAVI;;AAWL;;AAEAC,QAbK,gBAaAC,IAbA,EAaMC,aAbN,EAaqBC,UAbrB,EAagCC,UAbhC,EAa2C;AAC5C,aAAKC,OAAL;AACA,YAAGD,cAAc,IAAjB,EAAsB;AAClB,gBAAIE,WAAmBJ,aAAvB;AACA,gBAAIK,SAAmBJ,UAAvB;AACH,SAHD,MAGK;AACD,gBAAIG,WAAmB,KAAKf,IAAL,CAAUiB,oBAAV,CAA+BN,aAA/B,CAAvB;AACA,gBAAIK,SAAmB,KAAKhB,IAAL,CAAUiB,oBAAV,CAA+BL,UAA/B,CAAvB;AACH;AACD,YAAIM,WAAmBnB,YAAYW,KAAKS,OAAjB,EAA0BnB,IAAjD;AACA,aAAKoB,QAAL,GAAuB,KAAKpB,IAAL,CAAUqB,cAAV,CAAyBH,QAAzB,CAAvB;AACA,aAAKE,QAAL,CAAcE,MAAd,GAAuB,IAAvB;AACA,aAAKF,QAAL,CAAcG,WAAd,CAA0BR,QAA1B;AACA,aAAKS,MAAL,GAAuB,KAAKJ,QAAL,CAAcK,YAAd,CAA2BC,GAAGC,QAA9B,CAAvB;AACA,YAAIC,WAAmBzB,GAAG0B,SAAH,CAAad,QAAb,EAAuBC,MAAvB,IAA+B,IAAtD;AACA,YAAIc,UAAmB3B,GAAG4B,QAAH,CAAY5B,GAAG6B,MAAH,CAAUJ,QAAV,EAAoBZ,MAApB,CAAZ,EAAyCb,GAAG8B,QAAH,CAAY,YAAU;AAClFhC,kBAAMiC,UAAN,CAAiB,MAAjB,EAAyBxB,KAAKS,OAAL,GAAe,MAAxC;AACA,iBAAKgB,UAAL,CAAgBzB,IAAhB;AACH,SAH2E,CAG1E0B,IAH0E,CAGrE,IAHqE,CAAZ,CAAzC,CAAvB;AAIA,aAAKhB,QAAL,CAAciB,SAAd,CAAwBP,OAAxB;AACA,aAAKN,MAAL,CAAYc,YAAZ,CAAyB,CAAzB,EAA4B5B,KAAKS,OAAL,GAAc,MAA1C,EAAkD,IAAlD;AACH,KAlCI;AAoCLL,WApCK,qBAoCI;AACL,aAAKd,IAAL,CAAUuC,QAAV,CAAmBC,OAAnB,CAA2B,UAASC,KAAT,EAAe;AACtCA,kBAAMnB,MAAN,GAAe,KAAf;AACH,SAFD;AAGH,KAxCI;AA0CLa,cA1CK,sBA0CMzB,IA1CN,EA0CW;AACZ,aAAKc,MAAL,CAAYkB,mBAAZ,CAAgC,KAAKC,KAAL,CAAWP,IAAX,CAAgB,IAAhB,CAAhC;AACA,aAAKZ,MAAL,CAAYc,YAAZ,CAAyB,CAAzB,EAA4B5B,KAAKS,OAAL,GAAc,MAA1C,EAAkD,KAAlD;AACH,KA7CI;AA+CLwB,SA/CK,mBA+CE;AACH,aAAK3C,IAAL,CAAU4C,gBAAV;AACH;AAjDI,CAAT","file":"interact.js","sourceRoot":"../../../../../../assets/hall/script/public","sourcesContent":["const interactCfg = {\n    \"Jidan\"  : {node:\"liwu_0\"},\n    \"Tuoxie\" : {node:\"liwu_0\"},\n    \"Hua\"    : {node:\"liwu_1\"},\n    \"Wen\"    : {node:\"liwu_1\"},\n    \"Bianpao\": {node:\"liwu_2\"},\n    \"Hongbao\": {node:\"liwu_2\"},\n    \"Xueqiu\" : {node:\"liwu_2\"},\n    \"Shoulei\": {node:\"liwu_3\"},\n    \"Yan\"    : {node:\"liwu_3\"},\n}  \nlet Audio = require('Audio');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        \n    },\n    // onLoad () {},\n\n    start () {\n\n    },\n    // update (dt) {},\n\n    show(data, startWorldPos, endWoldPos,isExchange){\n        this.hideAll();\n        if(isExchange == true){\n            var startPos         = startWorldPos;\n            var endPos           = endWoldPos;\n        }else{\n            var startPos         = this.node.convertToNodeSpaceAR(startWorldPos);\n            var endPos           = this.node.convertToNodeSpaceAR(endWoldPos);\n        }\n        var nodeName         = interactCfg[data.content].node;\n        this.animNode        = this.node.getChildByName(nodeName);\n        this.animNode.active = true;\n        this.animNode.setPosition(startPos);\n        this.spAnim          = this.animNode.getComponent(sp.Skeleton);\n        var moveTime         = cc.pDistance(startPos, endPos)/1500;\n        var moveAct          = cc.sequence(cc.moveTo(moveTime, endPos), cc.callFunc(function(){\n            Audio.playEffect('hall', data.content + '.mp3');\n            this.moveActEnd(data);\n        }.bind(this)))\n        this.animNode.runAction(moveAct);\n        this.spAnim.setAnimation(0, data.content +\"_fei\", true);\n    },\n\n    hideAll(){\n        this.node.children.forEach(function(child){\n            child.active = false;\n        })\n    },\n\n    moveActEnd(data){\n        this.spAnim.setCompleteListener(this.close.bind(this));\n        this.spAnim.setAnimation(0, data.content +\"_dao\", false);\n    },\n\n    close(){\n        this.node.removeFromParent();\n    },\n\n\n    \n});\n"]}