{"version":3,"sources":["globalUI.js"],"names":["cc","Class","extends","Component","properties","zhuanquanPre","type","Prefab","default","minSingleButtonPre","minDoubleButtonPre","onLoad","hasZhuanquan","_hasNetZhuanquan","fun","event","add","data","flag","text","from","netZhuanquan","instantiate","parent","director","getScene","getChildByName","setSiblingIndex","getComponent","setString","destroy","zhuanquan","bind","mnode","init","onDestroy","remove"],"mappings":"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","file":"globalUI.js","sourceRoot":"../../../../../../assets/hall/script/login","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        zhuanquanPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        minSingleButtonPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        minDoubleButtonPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n    },\n\n    onLoad() {\n        this.hasZhuanquan = false;\n        this._hasNetZhuanquan = false;\n        fun.event.add('GlobalUIZhuanquan', 'Zhuanquan', function (data) {\n            let flag = false;\n            let text = '';\n            let from = 'normal';\n            if ((typeof data) === 'boolean') {\n                flag = data;\n            } else {\n                flag = data.flag;\n                text = data.text || text;\n                from = data.from;\n            }\n            if (from === 'net') {\n                if (flag) {\n                    if (!this._hasNetZhuanquan) {\n                        this.netZhuanquan = cc.instantiate(this.zhuanquanPre);\n                        this.netZhuanquan.parent = cc.director.getScene().getChildByName('Canvas');\n                        this.netZhuanquan.setSiblingIndex(9998);\n                        this._hasNetZhuanquan = true;\n                    }\n                    this.netZhuanquan.getComponent('zhuanquan').setString(text);\n                } else {\n                    if (this._hasNetZhuanquan) {\n                        this.netZhuanquan.destroy();\n                        this._hasNetZhuanquan = false;\n                    }\n                }\n            }\n            if (flag) {\n                if (!this.hasZhuanquan) {\n                    this.zhuanquan = cc.instantiate(this.zhuanquanPre);\n                    this.zhuanquan.parent = cc.director.getScene().getChildByName('Canvas');\n                    this.zhuanquan.setSiblingIndex(9998);\n                    this.hasZhuanquan = true;\n                }\n                this.zhuanquan.getComponent('zhuanquan').setString(text);\n            } else {\n                if (this.hasZhuanquan) {\n                    this.zhuanquan.destroy();\n                    this.hasZhuanquan = false;\n                }\n            }\n        }.bind(this));\n\n        fun.event.add('GlobalUIMinSingleButtonPop', 'MinSingleButtonPop', function (data) {\n            let mnode = cc.instantiate(this.minSingleButtonPre);\n            mnode.parent = cc.director.getScene().getChildByName('Canvas') ||\n                cc.director.getScene().getChildByName('DDZ_UIROOT') ||\n                cc.director.getScene().getChildByName('DDZ_Replay');\n            mnode.setSiblingIndex(9999);\n            mnode.getComponent('minSingleButtonPop').init(data);\n        }.bind(this));\n\n        fun.event.add('GlobalUIMinDoubleButtonPop', 'MinDoubleButtonPop', function (data) {\n            let mnode = cc.instantiate(this.minDoubleButtonPre);\n            mnode.parent = cc.director.getScene().getChildByName('Canvas') ||\n                cc.director.getScene().getChildByName('DDZ_UIROOT') ||\n                cc.director.getScene().getChildByName('DDZ_Replay');\n            mnode.setSiblingIndex(9999);\n            mnode.getComponent('minDoubleButtonPop').init(data);\n        }.bind(this));\n    },\n\n    onDestroy() {\n        fun.event.remove('GlobalUIZhuanquan');\n        fun.event.remove('GlobalUIMinSingleButtonPop');\n        fun.event.remove('GlobalUIMinDoubleButtonPop');\n    }\n\n});\n"]}