{"version":3,"sources":["zhanjiLayer.js"],"names":["Audio","require","cc","Class","extends","Component","properties","noZhanji","type","Node","default","toggleGroupNode","btnClose","btnView","viewPlaybackPre","Prefab","pukeZhanjiPre","majiangZhanjiPre","onLoad","animation","node","getComponent","Animation","clips","getClips","on","onBtnViewClick","onBtnCloseClick","intranet","fun","gameCfg","loginUrl","gameConst","loginUrlType","ddz","getChildByName","active","init","gameType","data","YL","info","children","forEach","toggleNode","getComponentInChildren","name","Toggle","check","initWithData","enableCheck","onEnable","play","onBtnToggleClicked","playEffect","instantiate","parent","once","destroy"],"mappings":";;;;;;AAAA,IAAIA,QAAQC,QAAQ,OAAR,CAAZ;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;;AAERC,kBAAU;AACNC,kBAAMN,GAAGO,IADH;AAENC,qBAAS;AAFH,SAFF;;AAORC,yBAAiB;AACbH,kBAAMN,GAAGO,IADI;AAEbC,qBAAS;AAFI,SAPT;;AAYRE,kBAAU;AACNJ,kBAAMN,GAAGO,IADH;AAENC,qBAAS;AAFH,SAZF;;AAiBRG,iBAAS;AACLL,kBAAMN,GAAGO,IADJ;AAELC,qBAAS;AAFJ,SAjBD;;AAsBRI,yBAAiB;AACbN,kBAAMN,GAAGa,MADI;AAEbL,qBAAS;AAFI,SAtBT;;AA2BRM,uBAAe;AACXR,kBAAMN,GAAGa,MADE;AAEXL,qBAAS;AAFE,SA3BP;;AAgCRO,0BAAkB;AACdT,kBAAMN,GAAGa,MADK;AAEdL,qBAAS;AAFK;AAhCV,KAHP;;AA0CLQ,UA1CK,oBA0CK;AACN,aAAKC,SAAL,GAAiB,KAAKC,IAAL,CAAUC,YAAV,CAAuBnB,GAAGoB,SAA1B,CAAjB;AACA,aAAKC,KAAL,GAAa,KAAKJ,SAAL,CAAeK,QAAf,EAAb;AACA,aAAKX,OAAL,CAAaY,EAAb,CAAgB,OAAhB,EAAyB,KAAKC,cAA9B,EAA8C,IAA9C;AACA,aAAKd,QAAL,CAAca,EAAd,CAAiB,OAAjB,EAA0B,KAAKE,eAA/B,EAAgD,IAAhD;AACA;AACA,YAAIC,WAAWC,IAAIC,OAAJ,CAAYC,QAAZ,KAAyBC,UAAUD,QAAV,CAAmBC,UAAUC,YAAV,CAAuBL,QAA1C,CAAzB,GAA+E,IAA/E,GAAsF,KAArG;AACA,YAAIM,MAAM,KAAKvB,eAAL,CAAqBwB,cAArB,CAAoC,KAApC,CAAV;AACA,YAAIP,QAAJ,EAAc;AACVM,gBAAIE,MAAJ,GAAa,IAAb;AACH,SAFD,MAEO;AACHF,gBAAIE,MAAJ,GAAa,KAAb;AACH;AACJ,KAvDI;AAyDLC,QAzDK,gBAyDCC,QAzDD,EAyDWC,IAzDX,EAyDiB;AAClBrC,WAAGsC,EAAH,CAAMC,IAAN,CAAW,YAAX,EAAwBH,QAAxB,EAAiCC,IAAjC;AACA,aAAK5B,eAAL,CAAqB+B,QAArB,CAA8BC,OAA9B,CAAsC,UAASC,UAAT,EAAqB;AACvDA,uBAAWC,sBAAX,CAAkC,WAAlC,EAA+CR,IAA/C;AACA,gBAAIC,aAAaN,UAAUM,QAAV,CAAmBM,WAAWE,IAA9B,CAAjB,EAAsD;AAClDF,2BAAWvB,YAAX,CAAwBnB,GAAG6C,MAA3B,EAAmCC,KAAnC;AACAJ,2BAAWC,sBAAX,CAAkC,WAAlC,EAA+CI,YAA/C,CAA4DV,IAA5D;AACH,aAHD,MAGO;AACHK,2BAAWC,sBAAX,CAAkC,WAAlC,EAA+CK,WAA/C,CAA2D,IAA3D;AACH;AACJ,SARD;AASH,KApEI;AAsELC,YAtEK,sBAsEO;AACR,aAAKhC,SAAL,CAAeiC,IAAf,CAAoB,KAAK7B,KAAL,CAAW,CAAX,EAAcuB,IAAlC;AACH,KAxEI;AA0ELO,sBA1EK,gCA0Ee;AAChBrD,cAAMsD,UAAN,CAAiB,MAAjB,EAAyB,kBAAzB;AACH,KA5EI;AA8EL5B,kBA9EK,4BA8Ea;AACd1B,cAAMsD,UAAN,CAAiB,MAAjB,EAAyB,kBAAzB;AACA,YAAIxC,kBAAkBZ,GAAGqD,WAAH,CAAe,KAAKzC,eAApB,CAAtB;AACAA,wBAAgB0C,MAAhB,GAAyB,KAAKpC,IAA9B;AACH,KAlFI;AAoFLO,mBApFK,6BAoFa;AACd3B,cAAMsD,UAAN,CAAiB,MAAjB,EAAyB,kBAAzB;AACA,aAAK3C,eAAL,CAAqB+B,QAArB,CAA8BC,OAA9B,CAAsC,UAASC,UAAT,EAAqB;AACvDA,uBAAWC,sBAAX,CAAkC,WAAlC,EAA+CK,WAA/C,CAA2D,KAA3D;AACH,SAFD;AAGA,aAAK/B,SAAL,CAAeiC,IAAf,CAAoB,KAAK7B,KAAL,CAAW,CAAX,EAAcuB,IAAlC,EAAwCW,IAAxC,CAA6C,UAA7C,EAAyD,YAAY;AACjE,iBAAKrC,IAAL,CAAUsC,OAAV;AACH,SAFD,EAEG,IAFH;AAGH;AA5FI,CAAT","file":"zhanjiLayer.js","sourceRoot":"../../../../../../assets/hall/script/zhanji","sourcesContent":["let Audio = require('Audio');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        noZhanji: {\n            type: cc.Node,\n            default: null,\n        },\n\n        toggleGroupNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        btnClose: {\n            type: cc.Node,\n            default: null,\n        },\n\n        btnView: {\n            type: cc.Node,\n            default: null,\n        },\n\n        viewPlaybackPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        pukeZhanjiPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        majiangZhanjiPre: {\n            type: cc.Prefab,\n            default: null,\n        },\n    },\n\n\n    onLoad () {\n        this.animation = this.node.getComponent(cc.Animation);\n        this.clips = this.animation.getClips();\n        this.btnView.on('click', this.onBtnViewClick, this);\n        this.btnClose.on('click', this.onBtnCloseClick, this);\n        //todo\n        let intranet = fun.gameCfg.loginUrl === gameConst.loginUrl[gameConst.loginUrlType.intranet] ? true : false;\n        let ddz = this.toggleGroupNode.getChildByName('DDZ');\n        if (intranet) {\n            ddz.active = true;\n        } else {\n            ddz.active = false;\n        }\n    },\n\n    init (gameType, data) {\n        cc.YL.info(\"战绩gametype\",gameType,data);\n        this.toggleGroupNode.children.forEach(function(toggleNode) {\n            toggleNode.getComponentInChildren('zhanjiScv').init();\n            if (gameType === gameConst.gameType[toggleNode.name]) {\n                toggleNode.getComponent(cc.Toggle).check();\n                toggleNode.getComponentInChildren('zhanjiScv').initWithData(data);\n            } else {\n                toggleNode.getComponentInChildren('zhanjiScv').enableCheck(true);\n            }\n        });\n    },\n\n    onEnable () {\n        this.animation.play(this.clips[0].name);\n    },\n\n    onBtnToggleClicked(){\n        Audio.playEffect('hall', 'button_nomal.mp3');\n    },\n\n    onBtnViewClick () {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        let viewPlaybackPre = cc.instantiate(this.viewPlaybackPre);\n        viewPlaybackPre.parent = this.node;\n    },\n\n    onBtnCloseClick() {\n        Audio.playEffect('hall', 'button_close.mp3');\n        this.toggleGroupNode.children.forEach(function(toggleNode) {\n            toggleNode.getComponentInChildren('zhanjiScv').enableCheck(false);\n        });\n        this.animation.play(this.clips[1].name).once('finished', function () {\n            this.node.destroy();\n        }, this);\n    },\n});\n"]}