{"version":3,"sources":["createScMahjongRoom.js"],"names":["Audio","require","PerJuCard","MinJuShu","MaxJuShu","FengDingArr","DiFenArr","GuiZeArr","MoShiArr","cc","Class","extends","Component","properties","btnAdd","Node","btnMinus","btnRecharge","btnCreateRoom","btnClose","fangFeiShuomingL","Label","JuNumL","needCardL","currentCardL","waFa","moShi","fengDing","diFen","fangFei","guiZe","dingWei","storePre","Prefab","freeCardL","freeTimeBox","freeTimeL","freeBtn","detailPrefab","onLoad","_needCard","_juShu","string","on","onBtnAddClick","onBtnMinusClick","onBtnRechargeClick","onBtnCreateRoomClick","onBtnCloseClick","createInfo","fun","utils","getCreateRoomData","gameConst","gameType","scMahjong","setToggleChecked","WanFa","msArr","i","msN","getChildByName","weishu","MoShi","toString","substr","fengding","FengDing","difen","DiFen","FangFei","gzBinary","GuiZe","length","parseInt","getComponent","Toggle","isChecked","DingWei","animation","node","Animation","clips","getClips","onEnable","play","name","value","children","needCard","showRoomCard","data","TollCardCnt","detail","instantiate","parent","FreeCardList","setDetail","bind","active","minTime","ExpiredAt","freeCard","Cnt","time","t","Date","date","getFullYear","getMonth","getDate","req","GameType","Address","db","getData","location","forEach","substring","ms","gz","JuShu","saveCreateRoomData","event","dispatch","flag","text","net","pSend","rsp","RetCode","mjGameDefine","str","SCRETCODE","contentStr","okBtnStr","okCb","onRechargeClicked","setData","director","preloadScene","loadScene","playEffect","once","destroy"],"mappings":"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","file":"createScMahjongRoom.js","sourceRoot":"../../../../../../assets/hall/script/createRoom","sourcesContent":["let Audio = require('Audio');\nconst PerJuCard = 0;\nconst MinJuShu = 4;\nconst MaxJuShu = 32;\nconst FengDingArr = [3, 4, 5, 0];\nconst DiFenArr = [1, 2, 5, 10];\nconst GuiZeArr = [64, 32, 16, 8, 4, 2, 1];\nconst MoShiArr = [[10, 20, 30], [1, 2], [100, 200, 300]];\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btnAdd: cc.Node,\n        btnMinus: cc.Node,\n        btnRecharge: cc.Node,\n        btnCreateRoom: cc.Node,\n        btnClose: cc.Node,\n        fangFeiShuomingL: cc.Label,\n        JuNumL: cc.Label,\n        needCardL: cc.Label,\n        currentCardL: cc.Label,\n\n        waFa: cc.Node,\n        moShi: cc.Node,\n        fengDing: cc.Node,\n        diFen: cc.Node,\n        fangFei: cc.Node,\n        guiZe: cc.Node,\n        dingWei: cc.Node,\n        \n        storePre: cc.Prefab,\n        freeCardL: cc.Label,\n        freeTimeBox: cc.Node,\n        freeTimeL: cc.Label,\n        freeBtn: cc.Node,\n        detailPrefab: cc.Prefab,\n    },\n\n    onLoad () {\n        this._needCard = 4;\n        this._juShu = MinJuShu;\n        this.needCardL.string = 0;\n\n        this.btnAdd.on('click', this.onBtnAddClick, this);\n        this.btnMinus.on('click', this.onBtnMinusClick, this);\n        this.btnRecharge.on('click', this.onBtnRechargeClick, this);\n        this.btnCreateRoom.on('click', this.onBtnCreateRoomClick, this);\n        this.btnClose.on('click', this.onBtnCloseClick, this);\n\n        let createInfo = fun.utils.getCreateRoomData(gameConst.gameType.scMahjong);\n        if (createInfo) {\n            this.setToggleChecked(this.waFa, createInfo.WanFa);\n            let msArr = [2, 1, 3];\n            for (let i = 0; i < 3; ++i) {\n                let msN = this.moShi.getChildByName('tog' + msArr[i]);\n                let weishu = createInfo.MoShi.toString().substr(2-i, 1);\n                this.setToggleChecked(msN, weishu);\n            }\n            let fengding = {3: 1, 4: 2, 5: 3, 0: 4};\n            this.setToggleChecked(this.fengDing, fengding[createInfo.FengDing]);\n            let difen = {1: 1, 2: 2, 5: 3, 10: 4};\n            this.setToggleChecked(this.diFen, difen[createInfo.DiFen]);\n            this.setToggleChecked(this.fangFei, createInfo.FangFei);\n            let gzBinary = createInfo.GuiZe.toString(2);\n            gzBinary = gzBinary.length < 8 ? '0000000'.substr(gzBinary.length) + gzBinary : gzBinary;\n            for (let i = 0; i < 7; ++i) {\n                if (parseInt(gzBinary.substr(i, 1)) === 1) {\n                    this.guiZe.getChildByName('toggle' + (i + 1)).getComponent(cc.Toggle).isChecked = true;\n                }\n            }\n            this.dingWei.getChildByName('toggle1').getComponent(cc.Toggle).isChecked = createInfo.DingWei;\n        }\n\n        this.animation = this.node.getComponent(cc.Animation);\n        this.clips = this.animation.getClips();\n    },\n\n    onEnable () {\n        this.animation.play(this.clips[0].name);\n    },\n\n    setToggleChecked(node, value) {\n        for (let i = 0; i < node.children.length; ++i) {\n            node.getChildByName('toggle' + (i+1)).getComponent(cc.Toggle).isChecked = false;\n        }\n        node.getChildByName('toggle'+value).getComponent(cc.Toggle).isChecked = true;\n    },\n\n    onBtnAddClick() {\n        let needCard = this._needCard;\n        if (this._juShu >= MaxJuShu) return;\n        this._juShu *= 2;\n        this.JuNumL.string = this._juShu;\n        needCard = this._juShu * PerJuCard;\n        this.needCardL.string = needCard;\n    },\n\n    onBtnMinusClick() {\n        let needCard = this._needCard;\n        if (this._juShu <= MinJuShu) return;\n        this._juShu /= 2;\n        this.JuNumL.string = this._juShu;\n        needCard = this._juShu * PerJuCard;\n        this.needCardL.string = needCard;\n    },\n    \n    showRoomCard(data, gameType) {\n        this.currentCardL.string = data.TollCardCnt || 0;\n        this.freeBtn.on('click', function () {\n            let detail = cc.instantiate(this.detailPrefab);\n            detail.parent = this.node;\n            if (!data.FreeCardList) return;\n            detail.getComponent('freeCardDetail').setDetail(data.FreeCardList, gameType);\n        }.bind(this));\n        if (!data.FreeCardList || data.FreeCardList.length === 0) {\n            this.freeCardL.string = 0;\n            this.freeTimeBox.active = false;\n        } else {\n            this.freeTimeBox.active = true;\n            let minTime = data.FreeCardList[0].ExpiredAt, freeCard = data.FreeCardList[0].Cnt;\n            for (let i in data.FreeCardList) {\n                let time = data.FreeCardList[i].ExpiredAt;\n                if (minTime > time) {\n                    minTime = time;\n                    freeCard = data.FreeCardList[i].Cnt;\n                }\n            }\n            let t = new Date(minTime * 1000);\n            let date = t.getFullYear().toString().substr(2, 2) + '年' + (t.getMonth() + 1) + '月' + t.getDate() + '日';\n            this.freeTimeL.string = date + '过期';\n            this.freeCardL.string = freeCard;\n        }\n    },\n\n    onBtnCreateRoomClick() {\n        let req = {\n            GameType: gameConst.gameType.scMahjong,\n            Address: fun.db.getData('UserInfo').location,\n            DingWei: this.dingWei.getChildByName('toggle1').getComponent(cc.Toggle).isChecked,\n        };\n        this.waFa.children.forEach(function (value) {\n            if (value.getComponent(cc.Toggle).isChecked) {\n                req.WanFa = parseInt(value.name.substring(value.name.length - 1));\n            }\n        });\n        let ms = 0;\n        for(let i = 0; i < 3; ++i) {\n            this.moShi.getChildByName('tog'+(i+1)).children.forEach(function (value) {\n                if (value.getComponent(cc.Toggle).isChecked) {\n                    ms += MoShiArr[i][parseInt(value.name.substring(value.name.length - 1)) - 1];\n                }\n            });\n        }\n        req.MoShi = ms;\n        this.fengDing.children.forEach(function (value) {\n            if (value.getComponent(cc.Toggle).isChecked) {\n                req.FengDing = FengDingArr[parseInt(value.name.substring(value.name.length - 1)) - 1];\n            }\n        });\n        this.diFen.children.forEach(function (value) {\n            if (value.getComponent(cc.Toggle).isChecked) {\n                req.DiFen = DiFenArr[parseInt(value.name.substring(value.name.length - 1)) - 1];\n            }\n        });\n        this.fangFei.children.forEach(function (value) {\n            if (value.getComponent(cc.Toggle).isChecked) {\n                req.FangFei = parseInt(value.name.substring(value.name.length - 1));\n            }\n        });\n        let gz = 0;\n        this.guiZe.children.forEach(function (value) {\n            if (value.getComponent(cc.Toggle).isChecked) {\n                gz += GuiZeArr[parseInt(value.name.substring(value.name.length - 1)) - 1];\n            }\n        });\n        req.GuiZe = gz;\n        req.JuShu = this._juShu;\n        \n        fun.utils.saveCreateRoomData(req);\n        fun.event.dispatch('Zhuanquan', {flag: true, text: \"创建房间中，请稍后...\"});\n        fun.net.pSend('CreateRoom', req, function(rsp) {\n            if (rsp.RetCode && rsp.RetCode !== 0) {\n                fun.event.dispatch('Zhuanquan', {flag: false});\n                var mjGameDefine = require(\"mjGameDefine\");\n                var str = (mjGameDefine.SCRETCODE[rsp.RetCode]) || \"失败 :\" + rsp.RetCode;\n                if (rsp.RetCode == 19) {\n                    fun.event.dispatch('MinSingleButtonPop', { contentStr: str, okBtnStr: \"前往充值\", okCb: this.onRechargeClicked.bind(this) });\n                } else {\n                    fun.event.dispatch('MinSingleButtonPop', { contentStr: str });\n                }\n                return;\n            }\n            fun.db.setData('RoomInfo', rsp);\n            fun.db.setData('scmahjong', rsp);\n            cc.director.preloadScene(\"majiang\", function () {\n                cc.director.loadScene('majiang');\n            })\n        });\n    },\n\n    onBtnRechargeClick() {\n        cc.instantiate(this.storePre).parent = this.node;\n    },\n    \n    onBtnCloseClick() {\n        Audio.playEffect('hall', 'button_close.mp3');\n        this.animation.play(this.clips[1].name).once('finished', function () {\n            this.node.destroy();\n        }, this);\n    },\n\n});\n"]}