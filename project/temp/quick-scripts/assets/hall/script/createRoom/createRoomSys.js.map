{"version":3,"sources":["createRoomSys.js"],"names":["createSys","updataParentN","node","gameType","allHideList","createN","getChildByName","btnCreateN","btnRechargeN","on","onCreateClicked","onRechargeClicked","oldCreate","fun","utils","getCreateRoomData","onInfoChange","context","showStore","_setClickScale","clickScale","btnNode","scale","_setClickHide","childN","hideList","_hideSome","forEach","item","active","_showSome","initSwitchItem","nodeName","clickData","defaultIndex","infoKey","itemNode","cilckList","chooseItem","chooseIndex","lastItem","curItem","setRoomInfo","bind","i","nIndex","event","push","length","self","findIndex","x","initSingleItem","defaultVale","chilckItem","setValue","undefined","refresh","initExplainItem","exNode","key","localData","listenList","value","getComponent","cc","Label","string","initItemHideList","nodeIndex","valueK","hideN","name","index","checkHideUpdate","k","roomInfo","getRoomInfo","gotoStore","module","exports","new"],"mappings":"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","file":"createRoomSys.js","sourceRoot":"../../../../../../assets/hall/script/createRoom","sourcesContent":["var createSys = function(){\n    this.updataParentN = function(node, gameType){\n        this.gameType     = gameType;\n        this.allHideList  = {};\n        this.createN      = node.getChildByName('back').getChildByName('down');\n        this.btnCreateN   = this.createN.getChildByName(\"btnCreateRoom\");\n        this.btnRechargeN = this.createN.getChildByName('cardShow').getChildByName('fangka').getChildByName(\"btnRecharge\");\n        this.btnCreateN.on(\"touchend\", this.onCreateClicked, this);\n        this.btnRechargeN.on(\"touchend\", this.onRechargeClicked, this);\n        this.oldCreate    = fun.utils.getCreateRoomData(gameType) || {}\n    }\n    //child 自行实现\n    this.onCreateClicked   = function(){};\n    this.onInfoChange      = function(){}   \n    this.onRechargeClicked = function(){\n       this.context.showStore(this.gameType);\n    };\n    this._setClickScale = (function(){\n        var clickScale = 1.04;\n        return function(btnNode){\n            btnNode.on(\"touchstart\", function(){\n                this.scale =clickScale;\n            }, btnNode)\n            btnNode.on(\"touchend\", function(){\n                this.scale = 1;\n            }, btnNode)\n            btnNode.on(\"touchcancel\", function(){\n                this.scale = 1;\n            }, btnNode)\n        }\n    })();\n    this._setClickHide = function(childN){\n        childN.hideList  = [];\n        childN._hideSome = function(){\n            childN.hideList.forEach(function(item){\n                item.active = false;\n            })\n        }\n        childN._showSome = function(){\n           childN.hideList.forEach(function(item){\n                item.active = true;\n            })\n        }\n    }\n    this.initSwitchItem = function(nodeName, clickData, defaultIndex, infoKey){\n        var itemNode        = this.createN.getChildByName(nodeName);\n        itemNode.cilckList  = [];\n        itemNode.chooseItem = function(chooseIndex){\n            itemNode.cilckList.forEach(function(item){\n                item.getChildByName(\"checkmark\").active = false;\n            })\n            if(this.lastItem){\n                this.lastItem._showSome();\n            }\n            var curItem = itemNode.cilckList[chooseIndex]\n            curItem.getChildByName(\"checkmark\").active = true;\n            this.lastItem = curItem;\n            this.setRoomInfo(infoKey, curItem.clickData);\n        }.bind(this);\n\n        for(let i = 0; i<clickData.length; i++){\n            var nIndex       = i+1;\n            let childN       = itemNode.getChildByName(\"toggle\"+nIndex);\n            this._setClickScale(childN);\n            this._setClickHide(childN);\n            childN.clickData = clickData[i]\n            childN.on(\"touchend\", function(event){\n                itemNode.chooseItem(i);\n            })\n            itemNode.cilckList.push(childN);\n        }\n        if(this.oldCreate[infoKey]){\n            var self = this;\n            defaultIndex = clickData.findIndex(function(x){return x == self.oldCreate[infoKey]})\n        }\n\n        if(defaultIndex >= 0){\n            itemNode.chooseItem(defaultIndex);\n        }\n    }\n\n    this.initSingleItem = function(nodeName, defaultVale, infoKey){\n        var itemNode      = this.createN.getChildByName(nodeName);\n        var chilckItem    = itemNode.getChildByName(\"toggle1\");\n        this._setClickHide(chilckItem);\n        this._setClickScale(chilckItem);\n        itemNode.setValue = (this.oldCreate[infoKey] != undefined) ? this.oldCreate[infoKey] : defaultVale\n        itemNode.refresh  = function(){\n            chilckItem.getChildByName(\"checkmark\").active = itemNode.setValue;\n            this.setRoomInfo(infoKey, itemNode.setValue);\n        }.bind(this);\n       \n        chilckItem.on(\"touchend\", function(){\n            itemNode.setValue = !(itemNode.setValue);\n            itemNode.refresh();\n        })\n        itemNode.refresh();\n    }\n\n    this.initExplainItem = function(exNode, key, localData){\n        this.listenList      = this.listenList || {};\n        this.listenList[key] = function(value){\n            exNode.getComponent(cc.Label).string = localData[key+value];\n        }.bind(this);\n    }\n\n    this.initItemHideList = function(nodeName, nodeIndex, valueK,hideList){\n        let childN = this.createN.getChildByName(nodeName).getChildByName(\"toggle\"+nodeIndex);\n        hideList.forEach(function(item){\n            let hideN = this.createN.getChildByName(item.name).getChildByName(\"toggle\"+item.index);\n            childN.hideList.push(hideN)\n        }.bind(this));\n        this.allHideList[valueK] = childN;\n        this.checkHideUpdate();\n    }\n\n    this.checkHideUpdate = function(){\n        for(let k in this.allHideList){\n            this.allHideList[k]._showSome(); \n        }\n        for(let k in this.roomInfo){\n            var valueK = k + this.roomInfo[k];\n            if(this.allHideList[valueK]){\n                this.allHideList[valueK]._hideSome();\n            }\n        }\n    }\n\n    this.getRoomInfo = function(){\n        return this.roomInfo;\n    }\n   \n\n    this.setRoomInfo = function(key, value){\n        this.roomInfo = this.roomInfo || {}\n        this.roomInfo[key] = value;\n        this.onInfoChange();\n        this.listenList = this.listenList || {};\n        if(this.listenList[key]){\n            this.listenList[key](value);\n        }\n        this.checkHideUpdate();\n    }\n\n    this.gotoStore = function(){\n        \n    }\n}\n\n\nmodule.exports = {\n    new : function(){\n        return new createSys();\n    }\n}"]}