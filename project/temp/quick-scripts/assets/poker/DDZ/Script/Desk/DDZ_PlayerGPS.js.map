{"version":3,"sources":["DDZ_PlayerGPS.js"],"names":["cc","Class","extends","Component","properties","onLoad","animation","node","getComponent","Animation","clips","getClips","backN","getChildByName","start","close","play","name","once","destroy","show","players","dis01","dis02","dis12","i","length","UserId","fun","db","getData","playerNodeShow","YL","DDZrightPlayerInfo","userId","points","p1","Address","p2","require","getDistanceByPoints","DDZleftPlayerInfo","Label","string","showDis","d","color","c","dis","dColor","Color","RED","showDistance","Math","floor","YELLOW","toFixed","GREEN","data","playerN","iconN","mainN","waitN","contentN","utils","loadUrlRes","HeadUrl","active"],"mappings":"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","file":"DDZ_PlayerGPS.js","sourceRoot":"../../../../../../../assets/poker/DDZ/Script/Desk","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {},\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.animation = this.node.getComponent(cc.Animation);\n        this.clips = this.animation.getClips();\n        this.backN = this.node.getChildByName(\"back\");\n    },\n\n    start () {\n\n    },\n\n    close (){\n        this.animation.play(this.clips[1].name).once('finished', function () {\n            this.node.destroy();\n        }, this);\n    },\n\n\n\n\n    show(players){\n        this.backN = this.node.getChildByName(\"back\");\n        var dis01 = null;\n        var dis02 = null;\n        var dis12 = null;\n        for (var i = 0; i < players.length; i++) {\n            if (players[i].UserId == fun.db.getData('UserInfo').UserId) {\n                this.playerNodeShow(this.backN.getChildByName(\"player_0\"), players[i]);\n            }\n            if (players[i].UserId == cc.YL.DDZrightPlayerInfo.userId) {\n                this.playerNodeShow(this.backN.getChildByName(\"player_1\"), players[i]);\n                var points = {p1: players[0].Address, p2: players[1].Address};\n                var dis01 = require('JSPhoneBaiDu').getDistanceByPoints(points);\n            }\n            if (players[i].UserId == cc.YL.DDZleftPlayerInfo.userId) {\n                this.playerNodeShow(this.backN.getChildByName(\"player_2\"), players[i]);\n                var points = {p1: players[0].Address, p2: players[1].Address};\n                var dis01 = require('JSPhoneBaiDu').getDistanceByPoints(points);\n                var points = {p1: players[0].Address, p2: players[2].Address};\n                var dis02 = require('JSPhoneBaiDu').getDistanceByPoints(points);\n                var points = {p1: players[1].Address, p2: players[2].Address};\n                var dis12 = require('JSPhoneBaiDu').getDistanceByPoints(points);\n            }\n        }\n        if (dis01) {\n            this.node.getChildByName(\"back\").getChildByName(\"player_0\").getChildByName(\"line_1\").\n            getChildByName(\"distance\").getChildByName(\"content\").getComponent(cc.Label).string = this.showDis(dis01).d;\n            this.node.getChildByName(\"back\").getChildByName(\"player_0\").getChildByName(\"line_1\").\n            getChildByName(\"distance\").getChildByName(\"content\").color = this.showDis(dis01).c;\n        }\n        if (dis02) {\n            this.node.getChildByName(\"back\").getChildByName(\"player_0\").getChildByName(\"line_2\").\n            getChildByName(\"distance\").getChildByName(\"content\").getComponent(cc.Label).string = this.showDis(dis01).d;\n            this.node.getChildByName(\"back\").getChildByName(\"player_0\").getChildByName(\"line_2\").\n            getChildByName(\"distance\").getChildByName(\"content\").color = this.showDis(dis01).c;\n        }\n        if (dis12) {\n            this.node.getChildByName(\"back\").getChildByName(\"player_1\").getChildByName(\"line_2\").\n            getChildByName(\"distance\").getChildByName(\"content\").getComponent(cc.Label).string = this.showDis(dis01).d;\n            this.node.getChildByName(\"back\").getChildByName(\"player_1\").getChildByName(\"line_2\").\n            getChildByName(\"distance\").getChildByName(\"content\").color = this.showDis(dis01).c;\n        }\n    },\n    showDis: function (dis) {\n        var dColor = cc.Color.RED;\n        var showDistance = Math.floor(dis) + \"米\";\n        if (dis < 0) {\n            showDistance = \"距离未知\";\n            dColor = cc.Color.YELLOW;\n        }\n        if (dis > 1000) {\n            showDistance = (dis / 1000).toFixed(2) + \"千米\";\n            dColor = cc.Color.GREEN;\n        }\n        return {c: dColor, d: showDistance,}\n    },\n    playerNodeShow: function (node, data) {\n        var playerN = node;\n        var iconN = playerN.getChildByName(\"icon\");\n        var mainN = iconN.getChildByName(\"main\");\n        var waitN = iconN.getChildByName(\"wait\");\n        var contentN = mainN.getChildByName(\"content\");\n        fun.utils.loadUrlRes(data.HeadUrl, contentN);\n        waitN.active = false;\n        mainN.active = true;\n    },\n\n    // update (dt) {},\n});\n"]}