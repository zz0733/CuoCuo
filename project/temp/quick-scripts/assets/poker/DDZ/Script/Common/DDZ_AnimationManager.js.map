{"version":3,"sources":["DDZ_AnimationManager.js"],"names":["cc","Class","extends","Component","properties","spring","Prefab","Dizhu","Boom","rocket","shunzi","waring","start","PlaySpring","spr","respr","clearNode","springNode","node","getChildByName","instantiate","active","addChild","name","finishFunc","bind","getComponent","sp","Skeleton","animation","setCompleteListener","PlayShunLianFei","playerIndex","str","ShunLianFeiNode","playerIndeArr","setPosition","posArr","p","PlayBoom","boomNode","animClipArr","firstFunc","PlayDizhu","DiZhuNode","animaArr","posArrEnd","thridFunc","secondFunc","stopAllActions","runAction","moveTo","PlayRocket","rocketNode","PlayWaring","index","waringNode","i","children","length","removeFromParent"],"mappings":"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","file":"DDZ_AnimationManager.js","sourceRoot":"../../../../../../../assets/poker/DDZ/Script/Common","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        spring: cc.Prefab,\n        Dizhu: cc.Prefab,\n        Boom: cc.Prefab,\n        rocket: cc.Prefab,\n        shunzi: cc.Prefab,\n        waring: cc.Prefab,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n    PlaySpring: function (spr, respr) {\n        this.clearNode();\n        var springNode = this.node.getChildByName(\"DDZ_Spring\") ?\n            this.node.getChildByName(\"DDZ_Spring\") :\n            cc.instantiate(this.spring);\n        this.node.getChildByName(\"DDZ_Spring\") ?\n            this.node.getChildByName(\"DDZ_Spring\").active = true :\n            this.node.addChild(springNode);\n        if (spr) {\n            var name = \"Chuntian\";\n        } else if (respr) {\n            var name = \"Fanchun\";\n        }\n        var finishFunc = function () {\n            this.clearNode();\n        }.bind(this);\n        springNode.getComponent(sp.Skeleton).animation = name;\n        springNode.getComponent(sp.Skeleton).setCompleteListener(finishFunc);\n    },\n    PlayShunLianFei: function (playerIndex, str) {\n        this.clearNode();\n        var ShunLianFeiNode = this.node.getChildByName(\"DDZ_Shunzi\") ?\n            this.node.getChildByName(\"DDZ_Shunzi\") :\n            cc.instantiate(this.shunzi);\n        this.node.getChildByName(\"DDZ_Shunzi\") ?\n            this.node.getChildByName(\"DDZ_Shunzi\").active = true :\n            this.node.addChild(ShunLianFeiNode);\n        var playerIndeArr = [\"_Zuo\", \"_You\", \"_Zuo\"];\n        var finishFunc = function () {\n            this.clearNode();\n        }.bind(this);\n        ShunLianFeiNode.getComponent(sp.Skeleton).animation = str + playerIndeArr[playerIndex];\n        ShunLianFeiNode.getComponent(sp.Skeleton).setCompleteListener(finishFunc);\n        if (str == \"Feiji\") {\n            ShunLianFeiNode.setPosition(0, -100);\n        } else {\n            var posArr = [cc.p(50, -114), cc.p(340, 56), cc.p(-326, 56)];\n            ShunLianFeiNode.setPosition(posArr[playerIndex]);\n        }\n    },\n    PlayBoom: function (playerIndex) {\n        this.clearNode();\n        var boomNode = this.node.getChildByName(\"DDZ_Boom\") ?\n            this.node.getChildByName(\"DDZ_Boom\") :\n            cc.instantiate(this.Boom);\n        this.node.getChildByName(\"DDZ_Boom\") ?\n            this.node.getChildByName(\"DDZ_Boom\").active = true :\n            this.node.addChild(boomNode);\n        var animClipArr = [\"Xia\", \"You\", \"Zuo\", \"Bao\"];\n        boomNode.getComponent(sp.Skeleton).animation = animClipArr[playerIndex];\n        var firstFunc = function () {\n            this.clearNode();\n        }.bind(this);\n        boomNode.getComponent(sp.Skeleton).setCompleteListener(firstFunc);\n\n    },\n    PlayDizhu: function (playerIndex) {\n        this.clearNode();\n        var DiZhuNode = this.node.getChildByName(\"DDZ_Dizhu\") ?\n            this.node.getChildByName(\"DDZ_Dizhu\") :\n            cc.instantiate(this.Dizhu);\n        this.node.getChildByName(\"DDZ_Dizhu\") ?\n            this.node.getChildByName(\"DDZ_Dizhu\").active = true :\n            this.node.addChild(DiZhuNode);\n        var animaArr = [\"Luo_Zuo\",\"Luo_Zuo\",\"Luo_Zuo\"];\n        var posArr = [cc.p(-591,-108),cc.p(593,258),cc.p(-582,258)];\n        var posArrEnd = [cc.p(-625,-150),cc.p(580,197),cc.p(-603,197)];\n        DiZhuNode.getComponent(sp.Skeleton).animation = \"Chuxian\";\n        var thridFunc = function(){\n            this.clearNode();\n        }.bind(this);\n        var secondFunc = function () {\n            DiZhuNode.getComponent(sp.Skeleton).animation = animaArr[playerIndex];\n            DiZhuNode.setPosition(posArrEnd[playerIndex]);\n            DiZhuNode.getComponent(sp.Skeleton).setCompleteListener(thridFunc);\n        }.bind(this);\n        var firstFunc = function () {\n            DiZhuNode.getComponent(sp.Skeleton).animation = \"Fei\";\n            DiZhuNode.stopAllActions();\n            DiZhuNode.runAction(cc.moveTo(0.3,posArr[playerIndex]));\n            DiZhuNode.getComponent(sp.Skeleton).setCompleteListener(secondFunc);\n        };\n        DiZhuNode.getComponent(sp.Skeleton).setCompleteListener(firstFunc);\n    },\n    PlayRocket: function (playerIndex) {\n        this.clearNode();\n        var rocketNode = this.node.getChildByName(\"DDZ_Rocket\") ?\n            this.node.getChildByName(\"DDZ_Rocket\") :\n            cc.instantiate(this.rocket);\n        this.node.getChildByName(\"DDZ_Rocket\") ?\n            this.node.getChildByName(\"DDZ_Rocket\").active = true :\n            this.node.addChild(rocketNode);\n        var posArr = [cc.p(0, -70), cc.p(411, 103), cc.p(-396, 103)];\n        rocketNode.setPosition(posArr[playerIndex]);\n        rocketNode.getComponent(sp.Skeleton).animation = \"Fei\";\n        var secondFunc = function () {\n            this.clearNode();\n        }.bind(this);\n        var firstFunc = function () {\n            rocketNode.getComponent(sp.Skeleton).animation = \"Luo\";\n            rocketNode.setPosition(0, -100);\n            rocketNode.getComponent(sp.Skeleton).setCompleteListener(secondFunc);\n        };\n        rocketNode.getComponent(sp.Skeleton).setCompleteListener(firstFunc);\n    },\n    PlayWaring: function (index) {\n        this.clearNode();\n        var posArr = [cc.p(-445, -136), cc.p(440, 224), cc.p(-440, 224)];\n        var waringNode = cc.instantiate(this.waring);\n        this.node.addChild(waringNode);\n        waringNode.getComponent(sp.Skeleton).animation = \"animation\";\n        waringNode.setPosition(posArr[index]);\n    },\n    clearNode: function () {\n        for (var i = 0; i < this.node.children.length; i++) {\n            if (this.node.children[i].name != \"DDZ_Waring\") {\n                this.node.children[i].active = false;\n                this.node.children[i].removeFromParent();\n            }\n        }\n    }\n});\n"]}