{"version":3,"sources":["DDZ_PlayerSelfPoker.js"],"names":["cc","Class","extends","Component","properties","selfPlayerHandPoker","handPokerIDs","_scale","_pokerMargin","pokerPrefab","type","Prefab","default","onLoad","_pos","p","_cardsList","node","getComponent","Layout","spacingX","clearHandPoker","removeAllChildren","initHandPoker","handPokerListID","isNewFaPai","YL","DDZTools","SortPoker","i","length","pokerObj","cardtypeArrTrans","TransPokertypeArr","push","_sortPokerArrObj","reverse","DDZHandPokerList","_updateHandPoker","DDZPokerTip","startAnalysis","sort","a","b","Num","pokerList","pokerNode","instantiate","initPoker","setScale","setPositionY","setTag","getChildByName","active","loaderID","DDZselfPlayerInfo","userId","addChild","setPosition","parent","setTouchEvent","isTouch","children","playerOutPokerArr","BtnNode","find"],"mappings":"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","file":"DDZ_PlayerSelfPoker.js","sourceRoot":"../../../../../../../assets/poker/DDZ/Script/Player","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        selfPlayerHandPoker: [],\n        handPokerIDs: [],\n        _scale: 1,\n        _pokerMargin: 50,\n        pokerPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n    },\n\n\n    onLoad () {\n        this._pos = cc.p(30, -250);\n        this._cardsList = [];\n        this.node.getComponent(cc.Layout).spacingX = this._pokerMargin;\n    },\n    clearHandPoker: function () {\n        this.node.removeAllChildren();\n        this._cardsList= [];\n    },\n    initHandPoker: function (handPokerListID,isNewFaPai) {\n        this.clearHandPoker();\n        this.handPokerIDs = handPokerListID;\n        this.selfPlayerHandPoker = [];\n        handPokerListID = cc.YL.DDZTools.SortPoker(handPokerListID);\n        for (var i = 0; i < handPokerListID.length; i++) {\n            var pokerObj = cc.YL.cardtypeArrTrans.TransPokertypeArr(handPokerListID[i]);\n            this.selfPlayerHandPoker.push(pokerObj);\n        }\n        this.selfPlayerHandPoker = this._sortPokerArrObj(this.selfPlayerHandPoker);\n        this.selfPlayerHandPoker.reverse();\n        cc.YL.DDZHandPokerList = this.selfPlayerHandPoker;\n        this._updateHandPoker(this.selfPlayerHandPoker,isNewFaPai);\n        cc.YL.DDZPokerTip.startAnalysis();// 出牌更新玩家当前手牌后，分析手牌\n    },\n    _sortPokerArrObj: function (selfPlayerHandPoker) {\n        return selfPlayerHandPoker.sort(function (a, b) {\n            return a.Num - b.Num\n        });\n\n    },\n    _updateHandPoker: function (pokerList,isNewFaPai) {\n        for (var i = 0; i < pokerList.length; i++) {\n            var pokerNode = cc.instantiate(this.pokerPrefab);\n            pokerNode.getComponent(\"DDZ_Poker\").initPoker(pokerList[i]);\n            pokerNode.setScale(this._scale);\n            pokerNode.setPositionY(0);\n            pokerNode.setTag(i);\n            if (i == (pokerList.length - 1 )) {\n                pokerNode.getChildByName(\"Front\").getChildByName(\"typeBig\").active = true;\n            } else {\n                pokerNode.getChildByName(\"Front\").getChildByName(\"typeBig\").active = false;\n            }\n            if (cc.YL.loaderID == cc.YL.DDZselfPlayerInfo.userId\n                && i == (pokerList.length - 1 )) {\n                pokerNode.getChildByName(\"OwnerSign\").active = true;\n            } else {\n                pokerNode.getChildByName(\"OwnerSign\").active = false;\n            }\n            if(isNewFaPai == true){\n                pokerNode.active  = false;\n            }\n            this.node.addChild(pokerNode);\n            this._cardsList.push(pokerNode);\n        }\n        this.node.setPosition(cc.p(30, -250));\n        if(isNewFaPai == true){\n            this.node.parent.getChildByName(\"HandPokerTouch\").active = false;\n        }else{\n            this.setTouchEvent(true);\n        }\n\n    },\n    setTouchEvent: function (isTouch) {\n        var children = this.node.children;\n        for (var i = 0; i < children.length; i++) {\n            children[i].setPositionY(0);\n        }\n        cc.YL.playerOutPokerArr = [];\n        if (isTouch == false) {\n            this.node.parent.getChildByName(\"HandPokerTouch\").active = false;\n            var children = this.node.children;\n            for (var i = 0; i < children.length; i++) {\n                children[i].getChildByName(\"Cover\").active = true;\n            }\n        } else {\n            var BtnNode = cc.find(\"DDZ_UIROOT/MainNode/PlayerBtnNode\");\n            if(BtnNode.getChildByName(\"DDZ_Pass\")){\n                this.node.parent.getChildByName(\"HandPokerTouch\").active = false;\n                var children = this.node.children;\n                for (var i = 0; i < children.length; i++) {\n                    children[i].getChildByName(\"Cover\").active = true;\n                }\n            }else{\n                this.node.parent.getChildByName(\"HandPokerTouch\").active = true;\n                var children = this.node.children;\n                for (var i = 0; i < children.length; i++) {\n                    children[i].getChildByName(\"Cover\").active = false;\n                }\n            }\n\n        }\n\n\n    },\n\n\n});\n"]}